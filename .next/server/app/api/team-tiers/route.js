"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/team-tiers/route";
exports.ids = ["app/api/team-tiers/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/next@14.2.32_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fteam-tiers%2Froute&page=%2Fapi%2Fteam-tiers%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fteam-tiers%2Froute.ts&appDir=%2FUsers%2Farnav%2FDocuments%2FFF%20Metrics%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Farnav%2FDocuments%2FFF%20Metrics&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/next@14.2.32_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fteam-tiers%2Froute&page=%2Fapi%2Fteam-tiers%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fteam-tiers%2Froute.ts&appDir=%2FUsers%2Farnav%2FDocuments%2FFF%20Metrics%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Farnav%2FDocuments%2FFF%20Metrics&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/.pnpm/next@14.2.32_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/.pnpm/next@14.2.32_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/.pnpm/next@14.2.32_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_arnav_Documents_FF_Metrics_src_app_api_team_tiers_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/team-tiers/route.ts */ \"(rsc)/./src/app/api/team-tiers/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/team-tiers/route\",\n        pathname: \"/api/team-tiers\",\n        filename: \"route\",\n        bundlePath: \"app/api/team-tiers/route\"\n    },\n    resolvedPagePath: \"/Users/arnav/Documents/FF Metrics/src/app/api/team-tiers/route.ts\",\n    nextConfigOutput,\n    userland: _Users_arnav_Documents_FF_Metrics_src_app_api_team_tiers_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/team-tiers/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vbmV4dEAxNC4yLjMyX3JlYWN0LWRvbUAxOC4zLjFfcmVhY3RAMTguMy4xX19yZWFjdEAxOC4zLjEvbm9kZV9tb2R1bGVzL25leHQvZGlzdC9idWlsZC93ZWJwYWNrL2xvYWRlcnMvbmV4dC1hcHAtbG9hZGVyLmpzP25hbWU9YXBwJTJGYXBpJTJGdGVhbS10aWVycyUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGdGVhbS10aWVycyUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRnRlYW0tdGllcnMlMkZyb3V0ZS50cyZhcHBEaXI9JTJGVXNlcnMlMkZhcm5hdiUyRkRvY3VtZW50cyUyRkZGJTIwTWV0cmljcyUyRnNyYyUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGVXNlcnMlMkZhcm5hdiUyRkRvY3VtZW50cyUyRkZGJTIwTWV0cmljcyZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDaUI7QUFDOUY7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxpRUFBaUU7QUFDekU7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUN1SDs7QUFFdkgiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9mYW50YXN5LWRhc2hib2FyZC8/ZmU0MSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvVXNlcnMvYXJuYXYvRG9jdW1lbnRzL0ZGIE1ldHJpY3Mvc3JjL2FwcC9hcGkvdGVhbS10aWVycy9yb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvdGVhbS10aWVycy9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3RlYW0tdGllcnNcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL3RlYW0tdGllcnMvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCIvVXNlcnMvYXJuYXYvRG9jdW1lbnRzL0ZGIE1ldHJpY3Mvc3JjL2FwcC9hcGkvdGVhbS10aWVycy9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvdGVhbS10aWVycy9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/next@14.2.32_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fteam-tiers%2Froute&page=%2Fapi%2Fteam-tiers%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fteam-tiers%2Froute.ts&appDir=%2FUsers%2Farnav%2FDocuments%2FFF%20Metrics%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Farnav%2FDocuments%2FFF%20Metrics&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/team-tiers/route.ts":
/*!*****************************************!*\
  !*** ./src/app/api/team-tiers/route.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/.pnpm/next@14.2.32_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_sleeper_api__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/sleeper/api */ \"(rsc)/./src/lib/sleeper/api.ts\");\n/* harmony import */ var _lib_player_matching_matcher__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/player-matching/matcher */ \"(rsc)/./src/lib/player-matching/matcher.ts\");\n\n\n\nasync function POST(request) {\n    try {\n        const { leagueId, draftAnalysisData } = await request.json();\n        if (!leagueId || !draftAnalysisData) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"League ID and draft analysis data are required\"\n            }, {\n                status: 400\n            });\n        }\n        console.log(\"Team tiers API called with leagueId:\", leagueId);\n        console.log(\"Draft analysis data available:\", !!draftAnalysisData);\n        console.log(\"MockoSheet data length:\", draftAnalysisData.mockoSheetData?.length || 0);\n        // Get rosters, users, and players from Sleeper\n        console.log(\"Fetching data from Sleeper API...\");\n        const [rosters, users, players] = await Promise.all([\n            _lib_sleeper_api__WEBPACK_IMPORTED_MODULE_1__.sleeperAPI.getRosters(leagueId),\n            _lib_sleeper_api__WEBPACK_IMPORTED_MODULE_1__.sleeperAPI.getUsers(leagueId),\n            _lib_sleeper_api__WEBPACK_IMPORTED_MODULE_1__.sleeperAPI.getPlayers()\n        ]);\n        console.log(\"Sleeper data fetched:\", {\n            rosters: rosters?.length || 0,\n            users: users?.length || 0,\n            players: players ? Object.keys(players).length : 0\n        });\n        // Create a map of roster_id to team name\n        const rosterToTeamMap = new Map();\n        rosters.forEach((roster)=>{\n            const user = users.find((u)=>u.user_id === roster.owner_id);\n            if (user) {\n                rosterToTeamMap.set(roster.roster_id.toString(), user.display_name);\n            }\n        });\n        console.log(\"MockoSheet data available:\", draftAnalysisData.mockoSheetData?.length || 0);\n        // Debug: Show sample MockoSheet tier data for each position\n        if (draftAnalysisData.mockoSheetData && draftAnalysisData.mockoSheetData.length > 0) {\n            const positions = [\n                \"QB\",\n                \"RB\",\n                \"WR\",\n                \"TE\",\n                \"K\",\n                \"DEF\"\n            ];\n            positions.forEach((pos)=>{\n                const topPlayers = draftAnalysisData.mockoSheetData.filter((p)=>p.position === pos).sort((a, b)=>a.posRank - b.posRank).slice(0, 3);\n                console.log(`Top 3 ${pos} players in MockoSheet:`, topPlayers.map((p)=>`${p.player} (Rank: ${p.posRank}, Tier: ${p.posTier})`).join(\", \"));\n            });\n        }\n        // Use the existing PlayerMatcher for consistent player matching\n        const playerMatcher = new _lib_player_matching_matcher__WEBPACK_IMPORTED_MODULE_2__.PlayerMatcher(draftAnalysisData.mockoSheetData || [], players);\n        // Group draft picks by team\n        const teamPicks = new Map();\n        draftAnalysisData.allPicks.forEach((pick)=>{\n            // Find the roster_id for this team\n            const rosterId = Array.from(rosterToTeamMap.entries()).find(([_, teamName])=>teamName === pick.team)?.[0];\n            if (rosterId) {\n                if (!teamPicks.has(rosterId)) {\n                    teamPicks.set(rosterId, []);\n                }\n                teamPicks.get(rosterId).push(pick);\n            }\n        });\n        console.log(\"Team picks mapping:\");\n        teamPicks.forEach((picks, rosterId)=>{\n            const teamName = rosterToTeamMap.get(rosterId);\n            console.log(`${teamName} (${rosterId}): ${picks.length} picks`);\n        });\n        // Calculate team tier data\n        const teamTierData = [];\n        console.log(\"Processing teams:\", rosters.length);\n        console.log(\"Draft picks available:\", draftAnalysisData.allPicks.length);\n        rosters.forEach((roster, index)=>{\n            const teamName = rosterToTeamMap.get(roster.roster_id.toString());\n            if (!teamName) {\n                console.log(`Skipping roster ${roster.roster_id} - no team name found`);\n                return;\n            }\n            try {\n                console.log(`Processing team ${index + 1}/${rosters.length}: ${teamName}`);\n                const teamPicksList = teamPicks.get(roster.roster_id.toString()) || [];\n                console.log(`Team ${teamName} has ${teamPicksList.length} draft picks`);\n                // Get current roster players and match with MockoSheet data using existing PlayerMatcher\n                const currentRosterPlayers = [];\n                if (roster.players && Array.isArray(roster.players)) {\n                    roster.players.forEach((playerId)=>{\n                        const player = players[playerId];\n                        if (player && player.first_name && player.last_name && player.position) {\n                            // Use the existing PlayerMatcher for consistent matching\n                            const mockoPlayer = playerMatcher.findMatch(playerId, player.position);\n                            currentRosterPlayers.push({\n                                pickNumber: 0,\n                                playerName: `${player.first_name} ${player.last_name}`,\n                                position: player.position,\n                                team: teamName,\n                                expertRank: mockoPlayer ? mockoPlayer.ecr : 0,\n                                adp: mockoPlayer ? mockoPlayer.adp : 0,\n                                actualPick: 0,\n                                reach: 0,\n                                valAdpScore: mockoPlayer ? mockoPlayer.valAdp : \"N/A\",\n                                tier: mockoPlayer ? mockoPlayer.posTier : \"N/A\",\n                                valScore: mockoPlayer ? mockoPlayer.val : 0,\n                                playoffShare: mockoPlayer ? mockoPlayer.ps : \"N/A\",\n                                isValuePick: false,\n                                isReach: false\n                            });\n                        }\n                    });\n                }\n                console.log(`Team ${teamName} has ${currentRosterPlayers.length} current roster players`);\n                // Show matching statistics\n                const matchedPlayers = currentRosterPlayers.filter((p)=>p.tier !== \"N/A\");\n                const unmatchedPlayers = currentRosterPlayers.filter((p)=>p.tier === \"N/A\");\n                console.log(`  - Matched with tier data: ${matchedPlayers.length}, No tier data: ${unmatchedPlayers.length}`);\n                // Combine draft picks and current roster players, removing duplicates\n                const allTeamPlayers = [\n                    ...teamPicksList\n                ];\n                // Add current roster players that aren't already in draft picks\n                currentRosterPlayers.forEach((rosterPlayer)=>{\n                    const isDuplicate = teamPicksList.some((draftPlayer)=>draftPlayer.playerName === rosterPlayer.playerName && draftPlayer.position === rosterPlayer.position);\n                    if (!isDuplicate) {\n                        allTeamPlayers.push(rosterPlayer);\n                    }\n                });\n                // Group all players by position\n                const positionGroups = new Map();\n                allTeamPlayers.forEach((player)=>{\n                    if (!positionGroups.has(player.position)) {\n                        positionGroups.set(player.position, []);\n                    }\n                    positionGroups.get(player.position).push(player);\n                });\n                // Define starter requirements for each position\n                const starterRequirements = {\n                    QB: 1,\n                    RB: 2,\n                    WR: 2,\n                    TE: 1,\n                    K: 1,\n                    DEF: 1\n                };\n                // Calculate position tier data with weighted averages\n                const positionTiers = {};\n                const positions = [\n                    \"QB\",\n                    \"RB\",\n                    \"WR\",\n                    \"TE\",\n                    \"K\",\n                    \"DEF\"\n                ];\n                positions.forEach((position)=>{\n                    const positionPicks = positionGroups.get(position) || [];\n                    if (positionPicks.length > 0) {\n                        const draftPicks = positionPicks.filter((p)=>p.pickNumber > 0);\n                        const rosterPlayers = positionPicks.filter((p)=>p.pickNumber === 0);\n                        console.log(`${teamName} ${position}: ${draftPicks.length} draft picks, ${rosterPlayers.length} roster players`);\n                        // Debug: Show individual player tiers for this position\n                        if (positionPicks.length > 0) {\n                            console.log(`  - Player tiers for ${teamName} ${position}:`, positionPicks.map((p)=>`${p.playerName}: tier=\"${p.tier}\"`).join(\", \"));\n                        }\n                        // Parse tier values for all players\n                        const playersWithTiers = positionPicks.map((pick)=>{\n                            let tierValue = 0;\n                            // Handle different tier formats\n                            if (typeof pick.tier === \"number\") {\n                                tierValue = pick.tier;\n                            } else if (typeof pick.tier === \"string\") {\n                                // Handle N/A as 0 (worst tier)\n                                if (pick.tier === \"N/A\") {\n                                    tierValue = 0;\n                                } else {\n                                    // Parse tier from format like \"QB1\", \"TE2\", \"K3\" etc.\n                                    const tierMatch = pick.tier.match(/\\d+$/);\n                                    if (tierMatch) {\n                                        tierValue = parseInt(tierMatch[0], 10);\n                                    } else {\n                                        // Fallback: try to parse as regular number\n                                        const parsed = parseFloat(pick.tier);\n                                        tierValue = isNaN(parsed) ? 0 : parsed;\n                                    }\n                                }\n                            }\n                            return {\n                                ...pick,\n                                tierValue\n                            };\n                        }).filter((player)=>player.tierValue > 0) // Only include players with valid tier data\n                        .sort((a, b)=>a.tierValue - b.tierValue); // Sort by tier (lower is better)\n                        console.log(`${teamName} ${position} players with valid tiers:`, playersWithTiers.length);\n                        let averageTier = 10; // Default to worst tier\n                        if (playersWithTiers.length > 0) {\n                            const requiredStarters = starterRequirements[position];\n                            const actualStarters = Math.min(requiredStarters, playersWithTiers.length);\n                            const benchPlayers = Math.max(0, playersWithTiers.length - actualStarters);\n                            // Calculate weighted average: 70% weight for starters, 30% for bench\n                            let weightedSum = 0;\n                            let totalWeight = 0;\n                            if (actualStarters > 0) {\n                                const starterTiers = playersWithTiers.slice(0, actualStarters).map((p)=>p.tierValue);\n                                const starterAverage = starterTiers.reduce((sum, tier)=>sum + tier, 0) / starterTiers.length;\n                                weightedSum += starterAverage * 0.7 * actualStarters;\n                                totalWeight += 0.7 * actualStarters;\n                                console.log(`${teamName} ${position} starters (${actualStarters}): avg tier=${starterAverage.toFixed(2)}`);\n                            }\n                            if (benchPlayers > 0) {\n                                const benchTiers = playersWithTiers.slice(actualStarters).map((p)=>p.tierValue);\n                                const benchAverage = benchTiers.reduce((sum, tier)=>sum + tier, 0) / benchTiers.length;\n                                weightedSum += benchAverage * 0.3 * benchPlayers;\n                                totalWeight += 0.3 * benchPlayers;\n                                console.log(`${teamName} ${position} bench (${benchPlayers}): avg tier=${benchAverage.toFixed(2)}`);\n                            }\n                            averageTier = totalWeight > 0 ? weightedSum / totalWeight : 10;\n                            console.log(`${teamName} ${position} weighted average tier: ${averageTier.toFixed(2)}`);\n                        } else {\n                            // Fallback: assign tiers based on draft position (earlier picks = better tiers)\n                            const draftPositions = positionPicks.map((pick)=>pick.pickNumber).filter((pos)=>pos > 0);\n                            if (draftPositions.length > 0) {\n                                const avgDraftPosition = draftPositions.reduce((sum, pos)=>sum + pos, 0) / draftPositions.length;\n                                // Convert draft position to tier (1-10 scale)\n                                // Earlier picks (lower numbers) = better tiers (lower numbers)\n                                averageTier = Math.min(10, Math.max(1, Math.round(avgDraftPosition / 20) + 1));\n                            }\n                            console.log(`${teamName} ${position} using fallback tier calculation: avg draft pos=${draftPositions.length > 0 ? draftPositions.reduce((sum, pos)=>sum + pos, 0) / draftPositions.length : \"N/A\"}, calculated tier=${averageTier}`);\n                        }\n                        // Find best player (lowest tier number)\n                        const bestPlayer = positionPicks.filter((pick)=>{\n                            if (typeof pick.tier === \"number\") return pick.tier > 0;\n                            if (typeof pick.tier === \"string\") {\n                                if (pick.tier === \"N/A\") return false;\n                                const tierMatch = pick.tier.match(/\\d+$/);\n                                if (tierMatch) return parseInt(tierMatch[0], 10) > 0;\n                                const parsed = parseFloat(pick.tier);\n                                return !isNaN(parsed) && parsed > 0;\n                            }\n                            return false;\n                        }).sort((a, b)=>{\n                            const getTierValue = (pick)=>{\n                                if (typeof pick.tier === \"number\") return pick.tier;\n                                if (typeof pick.tier === \"string\") {\n                                    if (pick.tier === \"N/A\") return 999;\n                                    const tierMatch = pick.tier.match(/\\d+$/);\n                                    if (tierMatch) return parseInt(tierMatch[0], 10);\n                                    const parsed = parseFloat(pick.tier);\n                                    return isNaN(parsed) ? 999 : parsed;\n                                }\n                                return 999;\n                            };\n                            return getTierValue(a) - getTierValue(b);\n                        })[0] || null;\n                        positionTiers[position] = {\n                            position,\n                            players: positionPicks,\n                            averageTier,\n                            bestPlayer,\n                            totalPlayers: positionPicks.length\n                        };\n                    } else {\n                        // No players at this position\n                        positionTiers[position] = {\n                            position,\n                            players: [],\n                            averageTier: 10,\n                            bestPlayer: null,\n                            totalPlayers: 0\n                        };\n                    }\n                });\n                // Calculate overall tier score (weighted average)\n                const weights = {\n                    QB: 1.2,\n                    RB: 1.5,\n                    WR: 1.5,\n                    TE: 1.0,\n                    K: 0.3,\n                    DEF: 0.5\n                };\n                let weightedSum = 0;\n                let totalWeight = 0;\n                Object.entries(positionTiers).forEach(([position, data])=>{\n                    if (data.totalPlayers > 0) {\n                        weightedSum += data.averageTier * weights[position];\n                        totalWeight += weights[position];\n                    }\n                });\n                const overallTierScore = totalWeight > 0 ? weightedSum / totalWeight : 0;\n                teamTierData.push({\n                    teamName,\n                    rosterId: roster.roster_id.toString(),\n                    ownerId: roster.owner_id,\n                    positionTiers,\n                    overallTierScore\n                });\n            } catch (error) {\n                console.error(`Error processing team ${teamName || \"unknown\"}:`, error);\n            // Continue with other teams even if one fails\n            }\n        });\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            data: teamTierData\n        });\n    } catch (error) {\n        console.error(\"Error processing team tiers:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to process team tier data\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFNQyxVQUFVO29CQUFFeEMsSUFBSTtvQkFBS0MsSUFBSTtvQkFBS0MsSUFBSTtvQkFBS0MsSUFBSTtvQkFBS0MsR0FBRztvQkFBS0MsS0FBSztnQkFBSTtnQkFDdkUsSUFBSW9CLGNBQWM7Z0JBQ2xCLElBQUlDLGNBQWM7Z0JBRWxCMUcsT0FBT3FDLE9BQU8sQ0FBQ2lELGVBQWVsRixPQUFPLENBQUMsQ0FBQyxDQUFDZ0IsVUFBVXFHLEtBQUs7b0JBQ3JELElBQUlBLEtBQUtGLFlBQVksR0FBRyxHQUFHO3dCQUN6QmQsZUFBZWdCLEtBQUt2QixXQUFXLEdBQUdzQixPQUFPLENBQUNwRyxTQUFpQzt3QkFDM0VzRixlQUFlYyxPQUFPLENBQUNwRyxTQUFpQztvQkFDMUQ7Z0JBQ0Y7Z0JBRUEsTUFBTXNHLG1CQUFtQmhCLGNBQWMsSUFBSUQsY0FBY0MsY0FBYztnQkFFdkU3RCxhQUFhRixJQUFJLENBQUM7b0JBQ2hCSjtvQkFDQUwsVUFBVTdCLE9BQU9PLFNBQVMsQ0FBQ0MsUUFBUTtvQkFDbkM4RyxTQUFTdEgsT0FBT0ssUUFBUTtvQkFDeEI0RTtvQkFDQW9DO2dCQUNGO1lBRUEsRUFBRSxPQUFPeEksT0FBTztnQkFDZEUsUUFBUUYsS0FBSyxDQUFDLENBQUMsc0JBQXNCLEVBQUVxRCxZQUFZLFVBQVUsQ0FBQyxDQUFDLEVBQUVyRDtZQUNqRSw4Q0FBOEM7WUFDaEQ7UUFDRjtRQUVBLE9BQU9SLHFEQUFZQSxDQUFDTyxJQUFJLENBQUM7WUFDdkIySSxTQUFTO1lBQ1RILE1BQU01RTtRQUNSO0lBRUYsRUFBRSxPQUFPM0QsT0FBTztRQUNkRSxRQUFRRixLQUFLLENBQUMsZ0NBQWdDQTtRQUM5QyxPQUFPUixxREFBWUEsQ0FBQ08sSUFBSSxDQUN0QjtZQUFFQyxPQUFPO1FBQW1DLEdBQzVDO1lBQUVDLFFBQVE7UUFBSTtJQUVsQjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZmFudGFzeS1kYXNoYm9hcmQvLi9zcmMvYXBwL2FwaS90ZWFtLXRpZXJzL3JvdXRlLnRzPzI0YjUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcbmltcG9ydCB7IHNsZWVwZXJBUEkgfSBmcm9tICdAL2xpYi9zbGVlcGVyL2FwaSc7XG5pbXBvcnQgeyBQbGF5ZXJNYXRjaGVyIH0gZnJvbSAnQC9saWIvcGxheWVyLW1hdGNoaW5nL21hdGNoZXInO1xuaW1wb3J0IHsgRHJhZnRBbmFseXNpc0RhdGEsIFRlYW1UaWVyRGF0YSwgUG9zaXRpb25UaWVyRGF0YSwgRHJhZnRQaWNrQW5hbHlzaXMgfSBmcm9tICdAL3R5cGVzL2RyYWZ0JztcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IGxlYWd1ZUlkLCBkcmFmdEFuYWx5c2lzRGF0YSB9ID0gYXdhaXQgcmVxdWVzdC5qc29uKCk7XG5cbiAgICBpZiAoIWxlYWd1ZUlkIHx8ICFkcmFmdEFuYWx5c2lzRGF0YSkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IGVycm9yOiAnTGVhZ3VlIElEIGFuZCBkcmFmdCBhbmFseXNpcyBkYXRhIGFyZSByZXF1aXJlZCcgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XG4gICAgICApO1xuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKCdUZWFtIHRpZXJzIEFQSSBjYWxsZWQgd2l0aCBsZWFndWVJZDonLCBsZWFndWVJZCk7XG4gICAgY29uc29sZS5sb2coJ0RyYWZ0IGFuYWx5c2lzIGRhdGEgYXZhaWxhYmxlOicsICEhZHJhZnRBbmFseXNpc0RhdGEpO1xuICAgIGNvbnNvbGUubG9nKCdNb2Nrb1NoZWV0IGRhdGEgbGVuZ3RoOicsIGRyYWZ0QW5hbHlzaXNEYXRhLm1vY2tvU2hlZXREYXRhPy5sZW5ndGggfHwgMCk7XG5cbiAgICAvLyBHZXQgcm9zdGVycywgdXNlcnMsIGFuZCBwbGF5ZXJzIGZyb20gU2xlZXBlclxuICAgIGNvbnNvbGUubG9nKCdGZXRjaGluZyBkYXRhIGZyb20gU2xlZXBlciBBUEkuLi4nKTtcbiAgICBjb25zdCBbcm9zdGVycywgdXNlcnMsIHBsYXllcnNdID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgc2xlZXBlckFQSS5nZXRSb3N0ZXJzKGxlYWd1ZUlkKSxcbiAgICAgIHNsZWVwZXJBUEkuZ2V0VXNlcnMobGVhZ3VlSWQpLFxuICAgICAgc2xlZXBlckFQSS5nZXRQbGF5ZXJzKClcbiAgICBdKTtcbiAgICBcbiAgICBjb25zb2xlLmxvZygnU2xlZXBlciBkYXRhIGZldGNoZWQ6Jywge1xuICAgICAgcm9zdGVyczogcm9zdGVycz8ubGVuZ3RoIHx8IDAsXG4gICAgICB1c2VyczogdXNlcnM/Lmxlbmd0aCB8fCAwLFxuICAgICAgcGxheWVyczogcGxheWVycyA/IE9iamVjdC5rZXlzKHBsYXllcnMpLmxlbmd0aCA6IDBcbiAgICB9KTtcblxuICAgIC8vIENyZWF0ZSBhIG1hcCBvZiByb3N0ZXJfaWQgdG8gdGVhbSBuYW1lXG4gICAgY29uc3Qgcm9zdGVyVG9UZWFtTWFwID0gbmV3IE1hcDxzdHJpbmcsIHN0cmluZz4oKTtcbiAgICByb3N0ZXJzLmZvckVhY2gocm9zdGVyID0+IHtcbiAgICAgIGNvbnN0IHVzZXIgPSB1c2Vycy5maW5kKHUgPT4gdS51c2VyX2lkID09PSByb3N0ZXIub3duZXJfaWQpO1xuICAgICAgaWYgKHVzZXIpIHtcbiAgICAgICAgcm9zdGVyVG9UZWFtTWFwLnNldChyb3N0ZXIucm9zdGVyX2lkLnRvU3RyaW5nKCksIHVzZXIuZGlzcGxheV9uYW1lKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGNvbnNvbGUubG9nKCdNb2Nrb1NoZWV0IGRhdGEgYXZhaWxhYmxlOicsIGRyYWZ0QW5hbHlzaXNEYXRhLm1vY2tvU2hlZXREYXRhPy5sZW5ndGggfHwgMCk7XG4gICAgXG4gICAgLy8gRGVidWc6IFNob3cgc2FtcGxlIE1vY2tvU2hlZXQgdGllciBkYXRhIGZvciBlYWNoIHBvc2l0aW9uXG4gICAgaWYgKGRyYWZ0QW5hbHlzaXNEYXRhLm1vY2tvU2hlZXREYXRhICYmIGRyYWZ0QW5hbHlzaXNEYXRhLm1vY2tvU2hlZXREYXRhLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IHBvc2l0aW9ucyA9IFsnUUInLCAnUkInLCAnV1InLCAnVEUnLCAnSycsICdERUYnXTtcbiAgICAgIHBvc2l0aW9ucy5mb3JFYWNoKHBvcyA9PiB7XG4gICAgICAgIGNvbnN0IHRvcFBsYXllcnMgPSBkcmFmdEFuYWx5c2lzRGF0YS5tb2Nrb1NoZWV0RGF0YVxuICAgICAgICAgIC5maWx0ZXIoKHA6IGFueSkgPT4gcC5wb3NpdGlvbiA9PT0gcG9zKVxuICAgICAgICAgIC5zb3J0KChhOiBhbnksIGI6IGFueSkgPT4gYS5wb3NSYW5rIC0gYi5wb3NSYW5rKVxuICAgICAgICAgIC5zbGljZSgwLCAzKTtcbiAgICAgICAgY29uc29sZS5sb2coYFRvcCAzICR7cG9zfSBwbGF5ZXJzIGluIE1vY2tvU2hlZXQ6YCwgXG4gICAgICAgICAgdG9wUGxheWVycy5tYXAoKHA6IGFueSkgPT4gYCR7cC5wbGF5ZXJ9IChSYW5rOiAke3AucG9zUmFua30sIFRpZXI6ICR7cC5wb3NUaWVyfSlgKS5qb2luKCcsICcpXG4gICAgICAgICk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgLy8gVXNlIHRoZSBleGlzdGluZyBQbGF5ZXJNYXRjaGVyIGZvciBjb25zaXN0ZW50IHBsYXllciBtYXRjaGluZ1xuICAgIGNvbnN0IHBsYXllck1hdGNoZXIgPSBuZXcgUGxheWVyTWF0Y2hlcihcbiAgICAgIGRyYWZ0QW5hbHlzaXNEYXRhLm1vY2tvU2hlZXREYXRhIHx8IFtdLFxuICAgICAgcGxheWVyc1xuICAgICk7XG5cbiAgICAvLyBHcm91cCBkcmFmdCBwaWNrcyBieSB0ZWFtXG4gICAgY29uc3QgdGVhbVBpY2tzID0gbmV3IE1hcDxzdHJpbmcsIERyYWZ0UGlja0FuYWx5c2lzW10+KCk7XG4gICAgZHJhZnRBbmFseXNpc0RhdGEuYWxsUGlja3MuZm9yRWFjaCgocGljazogYW55KSA9PiB7XG4gICAgICAvLyBGaW5kIHRoZSByb3N0ZXJfaWQgZm9yIHRoaXMgdGVhbVxuICAgICAgY29uc3Qgcm9zdGVySWQgPSBBcnJheS5mcm9tKHJvc3RlclRvVGVhbU1hcC5lbnRyaWVzKCkpXG4gICAgICAgIC5maW5kKChbXywgdGVhbU5hbWVdKSA9PiB0ZWFtTmFtZSA9PT0gcGljay50ZWFtKT8uWzBdO1xuICAgICAgXG4gICAgICBpZiAocm9zdGVySWQpIHtcbiAgICAgICAgaWYgKCF0ZWFtUGlja3MuaGFzKHJvc3RlcklkKSkge1xuICAgICAgICAgIHRlYW1QaWNrcy5zZXQocm9zdGVySWQsIFtdKTtcbiAgICAgICAgfVxuICAgICAgICB0ZWFtUGlja3MuZ2V0KHJvc3RlcklkKSEucHVzaChwaWNrKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGNvbnNvbGUubG9nKCdUZWFtIHBpY2tzIG1hcHBpbmc6Jyk7XG4gICAgdGVhbVBpY2tzLmZvckVhY2goKHBpY2tzLCByb3N0ZXJJZCkgPT4ge1xuICAgICAgY29uc3QgdGVhbU5hbWUgPSByb3N0ZXJUb1RlYW1NYXAuZ2V0KHJvc3RlcklkKTtcbiAgICAgIGNvbnNvbGUubG9nKGAke3RlYW1OYW1lfSAoJHtyb3N0ZXJJZH0pOiAke3BpY2tzLmxlbmd0aH0gcGlja3NgKTtcbiAgICB9KTtcblxuICAgIC8vIENhbGN1bGF0ZSB0ZWFtIHRpZXIgZGF0YVxuICAgIGNvbnN0IHRlYW1UaWVyRGF0YTogVGVhbVRpZXJEYXRhW10gPSBbXTtcbiAgICBcbiAgICBjb25zb2xlLmxvZygnUHJvY2Vzc2luZyB0ZWFtczonLCByb3N0ZXJzLmxlbmd0aCk7XG4gICAgY29uc29sZS5sb2coJ0RyYWZ0IHBpY2tzIGF2YWlsYWJsZTonLCBkcmFmdEFuYWx5c2lzRGF0YS5hbGxQaWNrcy5sZW5ndGgpO1xuXG4gICAgcm9zdGVycy5mb3JFYWNoKChyb3N0ZXIsIGluZGV4KSA9PiB7XG4gICAgICBjb25zdCB0ZWFtTmFtZSA9IHJvc3RlclRvVGVhbU1hcC5nZXQocm9zdGVyLnJvc3Rlcl9pZC50b1N0cmluZygpKTtcbiAgICAgIGlmICghdGVhbU5hbWUpIHtcbiAgICAgICAgY29uc29sZS5sb2coYFNraXBwaW5nIHJvc3RlciAke3Jvc3Rlci5yb3N0ZXJfaWR9IC0gbm8gdGVhbSBuYW1lIGZvdW5kYCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc29sZS5sb2coYFByb2Nlc3NpbmcgdGVhbSAke2luZGV4ICsgMX0vJHtyb3N0ZXJzLmxlbmd0aH06ICR7dGVhbU5hbWV9YCk7XG5cbiAgICAgIGNvbnN0IHRlYW1QaWNrc0xpc3QgPSB0ZWFtUGlja3MuZ2V0KHJvc3Rlci5yb3N0ZXJfaWQudG9TdHJpbmcoKSkgfHwgW107XG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKGBUZWFtICR7dGVhbU5hbWV9IGhhcyAke3RlYW1QaWNrc0xpc3QubGVuZ3RofSBkcmFmdCBwaWNrc2ApO1xuICAgICAgXG4gICAgICAvLyBHZXQgY3VycmVudCByb3N0ZXIgcGxheWVycyBhbmQgbWF0Y2ggd2l0aCBNb2Nrb1NoZWV0IGRhdGEgdXNpbmcgZXhpc3RpbmcgUGxheWVyTWF0Y2hlclxuICAgICAgY29uc3QgY3VycmVudFJvc3RlclBsYXllcnM6IERyYWZ0UGlja0FuYWx5c2lzW10gPSBbXTtcbiAgICAgIGlmIChyb3N0ZXIucGxheWVycyAmJiBBcnJheS5pc0FycmF5KHJvc3Rlci5wbGF5ZXJzKSkge1xuICAgICAgICByb3N0ZXIucGxheWVycy5mb3JFYWNoKHBsYXllcklkID0+IHtcbiAgICAgICAgICBjb25zdCBwbGF5ZXIgPSBwbGF5ZXJzW3BsYXllcklkXTtcbiAgICAgICAgICBpZiAocGxheWVyICYmIHBsYXllci5maXJzdF9uYW1lICYmIHBsYXllci5sYXN0X25hbWUgJiYgcGxheWVyLnBvc2l0aW9uKSB7XG4gICAgICAgICAgICAvLyBVc2UgdGhlIGV4aXN0aW5nIFBsYXllck1hdGNoZXIgZm9yIGNvbnNpc3RlbnQgbWF0Y2hpbmdcbiAgICAgICAgICAgIGNvbnN0IG1vY2tvUGxheWVyID0gcGxheWVyTWF0Y2hlci5maW5kTWF0Y2gocGxheWVySWQsIHBsYXllci5wb3NpdGlvbik7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGN1cnJlbnRSb3N0ZXJQbGF5ZXJzLnB1c2goe1xuICAgICAgICAgICAgICBwaWNrTnVtYmVyOiAwLCAvLyBOb3QgYSBkcmFmdCBwaWNrXG4gICAgICAgICAgICAgIHBsYXllck5hbWU6IGAke3BsYXllci5maXJzdF9uYW1lfSAke3BsYXllci5sYXN0X25hbWV9YCxcbiAgICAgICAgICAgICAgcG9zaXRpb246IHBsYXllci5wb3NpdGlvbixcbiAgICAgICAgICAgICAgdGVhbTogdGVhbU5hbWUsXG4gICAgICAgICAgICAgIGV4cGVydFJhbms6IG1vY2tvUGxheWVyID8gbW9ja29QbGF5ZXIuZWNyIDogMCxcbiAgICAgICAgICAgICAgYWRwOiBtb2Nrb1BsYXllciA/IG1vY2tvUGxheWVyLmFkcCA6IDAsXG4gICAgICAgICAgICAgIGFjdHVhbFBpY2s6IDAsXG4gICAgICAgICAgICAgIHJlYWNoOiAwLFxuICAgICAgICAgICAgICB2YWxBZHBTY29yZTogbW9ja29QbGF5ZXIgPyBtb2Nrb1BsYXllci52YWxBZHAgOiAnTi9BJyxcbiAgICAgICAgICAgICAgdGllcjogbW9ja29QbGF5ZXIgPyBtb2Nrb1BsYXllci5wb3NUaWVyIDogJ04vQScsXG4gICAgICAgICAgICAgIHZhbFNjb3JlOiBtb2Nrb1BsYXllciA/IG1vY2tvUGxheWVyLnZhbCA6IDAsXG4gICAgICAgICAgICAgIHBsYXlvZmZTaGFyZTogbW9ja29QbGF5ZXIgPyBtb2Nrb1BsYXllci5wcyA6ICdOL0EnLFxuICAgICAgICAgICAgICBpc1ZhbHVlUGljazogZmFsc2UsXG4gICAgICAgICAgICAgIGlzUmVhY2g6IGZhbHNlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc29sZS5sb2coYFRlYW0gJHt0ZWFtTmFtZX0gaGFzICR7Y3VycmVudFJvc3RlclBsYXllcnMubGVuZ3RofSBjdXJyZW50IHJvc3RlciBwbGF5ZXJzYCk7XG4gICAgICBcbiAgICAgIC8vIFNob3cgbWF0Y2hpbmcgc3RhdGlzdGljc1xuICAgICAgY29uc3QgbWF0Y2hlZFBsYXllcnMgPSBjdXJyZW50Um9zdGVyUGxheWVycy5maWx0ZXIocCA9PiBwLnRpZXIgIT09ICdOL0EnKTtcbiAgICAgIGNvbnN0IHVubWF0Y2hlZFBsYXllcnMgPSBjdXJyZW50Um9zdGVyUGxheWVycy5maWx0ZXIocCA9PiBwLnRpZXIgPT09ICdOL0EnKTtcbiAgICAgIGNvbnNvbGUubG9nKGAgIC0gTWF0Y2hlZCB3aXRoIHRpZXIgZGF0YTogJHttYXRjaGVkUGxheWVycy5sZW5ndGh9LCBObyB0aWVyIGRhdGE6ICR7dW5tYXRjaGVkUGxheWVycy5sZW5ndGh9YCk7XG4gICAgICBcbiAgICAgIC8vIENvbWJpbmUgZHJhZnQgcGlja3MgYW5kIGN1cnJlbnQgcm9zdGVyIHBsYXllcnMsIHJlbW92aW5nIGR1cGxpY2F0ZXNcbiAgICAgIGNvbnN0IGFsbFRlYW1QbGF5ZXJzID0gWy4uLnRlYW1QaWNrc0xpc3RdO1xuICAgICAgXG4gICAgICAvLyBBZGQgY3VycmVudCByb3N0ZXIgcGxheWVycyB0aGF0IGFyZW4ndCBhbHJlYWR5IGluIGRyYWZ0IHBpY2tzXG4gICAgICBjdXJyZW50Um9zdGVyUGxheWVycy5mb3JFYWNoKHJvc3RlclBsYXllciA9PiB7XG4gICAgICAgIGNvbnN0IGlzRHVwbGljYXRlID0gdGVhbVBpY2tzTGlzdC5zb21lKGRyYWZ0UGxheWVyID0+IFxuICAgICAgICAgIGRyYWZ0UGxheWVyLnBsYXllck5hbWUgPT09IHJvc3RlclBsYXllci5wbGF5ZXJOYW1lICYmIFxuICAgICAgICAgIGRyYWZ0UGxheWVyLnBvc2l0aW9uID09PSByb3N0ZXJQbGF5ZXIucG9zaXRpb25cbiAgICAgICAgKTtcbiAgICAgICAgaWYgKCFpc0R1cGxpY2F0ZSkge1xuICAgICAgICAgIGFsbFRlYW1QbGF5ZXJzLnB1c2gocm9zdGVyUGxheWVyKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIEdyb3VwIGFsbCBwbGF5ZXJzIGJ5IHBvc2l0aW9uXG4gICAgICBjb25zdCBwb3NpdGlvbkdyb3VwcyA9IG5ldyBNYXA8c3RyaW5nLCBEcmFmdFBpY2tBbmFseXNpc1tdPigpO1xuICAgICAgYWxsVGVhbVBsYXllcnMuZm9yRWFjaChwbGF5ZXIgPT4ge1xuICAgICAgICBpZiAoIXBvc2l0aW9uR3JvdXBzLmhhcyhwbGF5ZXIucG9zaXRpb24pKSB7XG4gICAgICAgICAgcG9zaXRpb25Hcm91cHMuc2V0KHBsYXllci5wb3NpdGlvbiwgW10pO1xuICAgICAgICB9XG4gICAgICAgIHBvc2l0aW9uR3JvdXBzLmdldChwbGF5ZXIucG9zaXRpb24pIS5wdXNoKHBsYXllcik7XG4gICAgICB9KTtcblxuICAgICAgLy8gRGVmaW5lIHN0YXJ0ZXIgcmVxdWlyZW1lbnRzIGZvciBlYWNoIHBvc2l0aW9uXG4gICAgICBjb25zdCBzdGFydGVyUmVxdWlyZW1lbnRzID0ge1xuICAgICAgICBRQjogMSxcbiAgICAgICAgUkI6IDIsXG4gICAgICAgIFdSOiAyLFxuICAgICAgICBURTogMSxcbiAgICAgICAgSzogMSxcbiAgICAgICAgREVGOiAxXG4gICAgICB9O1xuXG4gICAgICAvLyBDYWxjdWxhdGUgcG9zaXRpb24gdGllciBkYXRhIHdpdGggd2VpZ2h0ZWQgYXZlcmFnZXNcbiAgICAgIGNvbnN0IHBvc2l0aW9uVGllcnM6IFJlY29yZDxzdHJpbmcsIFBvc2l0aW9uVGllckRhdGE+ID0ge307XG4gICAgICBjb25zdCBwb3NpdGlvbnMgPSBbJ1FCJywgJ1JCJywgJ1dSJywgJ1RFJywgJ0snLCAnREVGJ107XG4gICAgICBcbiAgICAgIHBvc2l0aW9ucy5mb3JFYWNoKHBvc2l0aW9uID0+IHtcbiAgICAgICAgY29uc3QgcG9zaXRpb25QaWNrcyA9IHBvc2l0aW9uR3JvdXBzLmdldChwb3NpdGlvbikgfHwgW107XG4gICAgICAgIFxuICAgICAgICBpZiAocG9zaXRpb25QaWNrcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgY29uc3QgZHJhZnRQaWNrcyA9IHBvc2l0aW9uUGlja3MuZmlsdGVyKHAgPT4gcC5waWNrTnVtYmVyID4gMCk7XG4gICAgICAgICAgY29uc3Qgcm9zdGVyUGxheWVycyA9IHBvc2l0aW9uUGlja3MuZmlsdGVyKHAgPT4gcC5waWNrTnVtYmVyID09PSAwKTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhgJHt0ZWFtTmFtZX0gJHtwb3NpdGlvbn06ICR7ZHJhZnRQaWNrcy5sZW5ndGh9IGRyYWZ0IHBpY2tzLCAke3Jvc3RlclBsYXllcnMubGVuZ3RofSByb3N0ZXIgcGxheWVyc2ApO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIERlYnVnOiBTaG93IGluZGl2aWR1YWwgcGxheWVyIHRpZXJzIGZvciB0aGlzIHBvc2l0aW9uXG4gICAgICAgICAgaWYgKHBvc2l0aW9uUGlja3MubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coYCAgLSBQbGF5ZXIgdGllcnMgZm9yICR7dGVhbU5hbWV9ICR7cG9zaXRpb259OmAsIFxuICAgICAgICAgICAgICBwb3NpdGlvblBpY2tzLm1hcChwID0+IGAke3AucGxheWVyTmFtZX06IHRpZXI9XCIke3AudGllcn1cImApLmpvaW4oJywgJylcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIC8vIFBhcnNlIHRpZXIgdmFsdWVzIGZvciBhbGwgcGxheWVyc1xuICAgICAgICAgIGNvbnN0IHBsYXllcnNXaXRoVGllcnMgPSBwb3NpdGlvblBpY2tzXG4gICAgICAgICAgICAubWFwKHBpY2sgPT4ge1xuICAgICAgICAgICAgICBsZXQgdGllclZhbHVlID0gMDtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIC8vIEhhbmRsZSBkaWZmZXJlbnQgdGllciBmb3JtYXRzXG4gICAgICAgICAgICAgIGlmICh0eXBlb2YgcGljay50aWVyID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICAgIHRpZXJWYWx1ZSA9IHBpY2sudGllcjtcbiAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgcGljay50aWVyID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIC8vIEhhbmRsZSBOL0EgYXMgMCAod29yc3QgdGllcilcbiAgICAgICAgICAgICAgICBpZiAocGljay50aWVyID09PSAnTi9BJykge1xuICAgICAgICAgICAgICAgICAgdGllclZhbHVlID0gMDtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgLy8gUGFyc2UgdGllciBmcm9tIGZvcm1hdCBsaWtlIFwiUUIxXCIsIFwiVEUyXCIsIFwiSzNcIiBldGMuXG4gICAgICAgICAgICAgICAgICBjb25zdCB0aWVyTWF0Y2ggPSBwaWNrLnRpZXIubWF0Y2goL1xcZCskLyk7XG4gICAgICAgICAgICAgICAgICBpZiAodGllck1hdGNoKSB7XG4gICAgICAgICAgICAgICAgICAgIHRpZXJWYWx1ZSA9IHBhcnNlSW50KHRpZXJNYXRjaFswXSwgMTApO1xuICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gRmFsbGJhY2s6IHRyeSB0byBwYXJzZSBhcyByZWd1bGFyIG51bWJlclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXJzZWQgPSBwYXJzZUZsb2F0KHBpY2sudGllcik7XG4gICAgICAgICAgICAgICAgICAgIHRpZXJWYWx1ZSA9IGlzTmFOKHBhcnNlZCkgPyAwIDogcGFyc2VkO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAuLi5waWNrLFxuICAgICAgICAgICAgICAgIHRpZXJWYWx1ZVxuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5maWx0ZXIocGxheWVyID0+IHBsYXllci50aWVyVmFsdWUgPiAwKSAvLyBPbmx5IGluY2x1ZGUgcGxheWVycyB3aXRoIHZhbGlkIHRpZXIgZGF0YVxuICAgICAgICAgICAgLnNvcnQoKGEsIGIpID0+IGEudGllclZhbHVlIC0gYi50aWVyVmFsdWUpOyAvLyBTb3J0IGJ5IHRpZXIgKGxvd2VyIGlzIGJldHRlcilcbiAgICAgICAgICBcbiAgICAgICAgICBjb25zb2xlLmxvZyhgJHt0ZWFtTmFtZX0gJHtwb3NpdGlvbn0gcGxheWVycyB3aXRoIHZhbGlkIHRpZXJzOmAsIHBsYXllcnNXaXRoVGllcnMubGVuZ3RoKTtcbiAgICAgICAgICBcbiAgICAgICAgICBsZXQgYXZlcmFnZVRpZXIgPSAxMDsgLy8gRGVmYXVsdCB0byB3b3JzdCB0aWVyXG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKHBsYXllcnNXaXRoVGllcnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29uc3QgcmVxdWlyZWRTdGFydGVycyA9IHN0YXJ0ZXJSZXF1aXJlbWVudHNbcG9zaXRpb24gYXMga2V5b2YgdHlwZW9mIHN0YXJ0ZXJSZXF1aXJlbWVudHNdO1xuICAgICAgICAgICAgY29uc3QgYWN0dWFsU3RhcnRlcnMgPSBNYXRoLm1pbihyZXF1aXJlZFN0YXJ0ZXJzLCBwbGF5ZXJzV2l0aFRpZXJzLmxlbmd0aCk7XG4gICAgICAgICAgICBjb25zdCBiZW5jaFBsYXllcnMgPSBNYXRoLm1heCgwLCBwbGF5ZXJzV2l0aFRpZXJzLmxlbmd0aCAtIGFjdHVhbFN0YXJ0ZXJzKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIHdlaWdodGVkIGF2ZXJhZ2U6IDcwJSB3ZWlnaHQgZm9yIHN0YXJ0ZXJzLCAzMCUgZm9yIGJlbmNoXG4gICAgICAgICAgICBsZXQgd2VpZ2h0ZWRTdW0gPSAwO1xuICAgICAgICAgICAgbGV0IHRvdGFsV2VpZ2h0ID0gMDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKGFjdHVhbFN0YXJ0ZXJzID4gMCkge1xuICAgICAgICAgICAgICBjb25zdCBzdGFydGVyVGllcnMgPSBwbGF5ZXJzV2l0aFRpZXJzLnNsaWNlKDAsIGFjdHVhbFN0YXJ0ZXJzKS5tYXAocCA9PiBwLnRpZXJWYWx1ZSk7XG4gICAgICAgICAgICAgIGNvbnN0IHN0YXJ0ZXJBdmVyYWdlID0gc3RhcnRlclRpZXJzLnJlZHVjZSgoc3VtLCB0aWVyKSA9PiBzdW0gKyB0aWVyLCAwKSAvIHN0YXJ0ZXJUaWVycy5sZW5ndGg7XG4gICAgICAgICAgICAgIHdlaWdodGVkU3VtICs9IHN0YXJ0ZXJBdmVyYWdlICogMC43ICogYWN0dWFsU3RhcnRlcnM7XG4gICAgICAgICAgICAgIHRvdGFsV2VpZ2h0ICs9IDAuNyAqIGFjdHVhbFN0YXJ0ZXJzO1xuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coYCR7dGVhbU5hbWV9ICR7cG9zaXRpb259IHN0YXJ0ZXJzICgke2FjdHVhbFN0YXJ0ZXJzfSk6IGF2ZyB0aWVyPSR7c3RhcnRlckF2ZXJhZ2UudG9GaXhlZCgyKX1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKGJlbmNoUGxheWVycyA+IDApIHtcbiAgICAgICAgICAgICAgY29uc3QgYmVuY2hUaWVycyA9IHBsYXllcnNXaXRoVGllcnMuc2xpY2UoYWN0dWFsU3RhcnRlcnMpLm1hcChwID0+IHAudGllclZhbHVlKTtcbiAgICAgICAgICAgICAgY29uc3QgYmVuY2hBdmVyYWdlID0gYmVuY2hUaWVycy5yZWR1Y2UoKHN1bSwgdGllcikgPT4gc3VtICsgdGllciwgMCkgLyBiZW5jaFRpZXJzLmxlbmd0aDtcbiAgICAgICAgICAgICAgd2VpZ2h0ZWRTdW0gKz0gYmVuY2hBdmVyYWdlICogMC4zICogYmVuY2hQbGF5ZXJzO1xuICAgICAgICAgICAgICB0b3RhbFdlaWdodCArPSAwLjMgKiBiZW5jaFBsYXllcnM7XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgJHt0ZWFtTmFtZX0gJHtwb3NpdGlvbn0gYmVuY2ggKCR7YmVuY2hQbGF5ZXJzfSk6IGF2ZyB0aWVyPSR7YmVuY2hBdmVyYWdlLnRvRml4ZWQoMil9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGF2ZXJhZ2VUaWVyID0gdG90YWxXZWlnaHQgPiAwID8gd2VpZ2h0ZWRTdW0gLyB0b3RhbFdlaWdodCA6IDEwO1xuICAgICAgICAgICAgY29uc29sZS5sb2coYCR7dGVhbU5hbWV9ICR7cG9zaXRpb259IHdlaWdodGVkIGF2ZXJhZ2UgdGllcjogJHthdmVyYWdlVGllci50b0ZpeGVkKDIpfWApO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBGYWxsYmFjazogYXNzaWduIHRpZXJzIGJhc2VkIG9uIGRyYWZ0IHBvc2l0aW9uIChlYXJsaWVyIHBpY2tzID0gYmV0dGVyIHRpZXJzKVxuICAgICAgICAgICAgY29uc3QgZHJhZnRQb3NpdGlvbnMgPSBwb3NpdGlvblBpY2tzLm1hcChwaWNrID0+IHBpY2sucGlja051bWJlcikuZmlsdGVyKHBvcyA9PiBwb3MgPiAwKTtcbiAgICAgICAgICAgIGlmIChkcmFmdFBvc2l0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGF2Z0RyYWZ0UG9zaXRpb24gPSBkcmFmdFBvc2l0aW9ucy5yZWR1Y2UoKHN1bSwgcG9zKSA9PiBzdW0gKyBwb3MsIDApIC8gZHJhZnRQb3NpdGlvbnMubGVuZ3RoO1xuICAgICAgICAgICAgICAvLyBDb252ZXJ0IGRyYWZ0IHBvc2l0aW9uIHRvIHRpZXIgKDEtMTAgc2NhbGUpXG4gICAgICAgICAgICAgIC8vIEVhcmxpZXIgcGlja3MgKGxvd2VyIG51bWJlcnMpID0gYmV0dGVyIHRpZXJzIChsb3dlciBudW1iZXJzKVxuICAgICAgICAgICAgICBhdmVyYWdlVGllciA9IE1hdGgubWluKDEwLCBNYXRoLm1heCgxLCBNYXRoLnJvdW5kKGF2Z0RyYWZ0UG9zaXRpb24gLyAyMCkgKyAxKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgJHt0ZWFtTmFtZX0gJHtwb3NpdGlvbn0gdXNpbmcgZmFsbGJhY2sgdGllciBjYWxjdWxhdGlvbjogYXZnIGRyYWZ0IHBvcz0ke2RyYWZ0UG9zaXRpb25zLmxlbmd0aCA+IDAgPyBkcmFmdFBvc2l0aW9ucy5yZWR1Y2UoKHN1bSwgcG9zKSA9PiBzdW0gKyBwb3MsIDApIC8gZHJhZnRQb3NpdGlvbnMubGVuZ3RoIDogJ04vQSd9LCBjYWxjdWxhdGVkIHRpZXI9JHthdmVyYWdlVGllcn1gKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBGaW5kIGJlc3QgcGxheWVyIChsb3dlc3QgdGllciBudW1iZXIpXG4gICAgICAgICAgY29uc3QgYmVzdFBsYXllciA9IHBvc2l0aW9uUGlja3NcbiAgICAgICAgICAgIC5maWx0ZXIocGljayA9PiB7XG4gICAgICAgICAgICAgIGlmICh0eXBlb2YgcGljay50aWVyID09PSAnbnVtYmVyJykgcmV0dXJuIHBpY2sudGllciA+IDA7XG4gICAgICAgICAgICAgIGlmICh0eXBlb2YgcGljay50aWVyID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIGlmIChwaWNrLnRpZXIgPT09ICdOL0EnKSByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgY29uc3QgdGllck1hdGNoID0gcGljay50aWVyLm1hdGNoKC9cXGQrJC8pO1xuICAgICAgICAgICAgICAgIGlmICh0aWVyTWF0Y2gpIHJldHVybiBwYXJzZUludCh0aWVyTWF0Y2hbMF0sIDEwKSA+IDA7XG4gICAgICAgICAgICAgICAgY29uc3QgcGFyc2VkID0gcGFyc2VGbG9hdChwaWNrLnRpZXIpO1xuICAgICAgICAgICAgICAgIHJldHVybiAhaXNOYU4ocGFyc2VkKSAmJiBwYXJzZWQgPiAwO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICAgICAgICBjb25zdCBnZXRUaWVyVmFsdWUgPSAocGljazogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBwaWNrLnRpZXIgPT09ICdudW1iZXInKSByZXR1cm4gcGljay50aWVyO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcGljay50aWVyID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgaWYgKHBpY2sudGllciA9PT0gJ04vQScpIHJldHVybiA5OTk7XG4gICAgICAgICAgICAgICAgICBjb25zdCB0aWVyTWF0Y2ggPSBwaWNrLnRpZXIubWF0Y2goL1xcZCskLyk7XG4gICAgICAgICAgICAgICAgICBpZiAodGllck1hdGNoKSByZXR1cm4gcGFyc2VJbnQodGllck1hdGNoWzBdLCAxMCk7XG4gICAgICAgICAgICAgICAgICBjb25zdCBwYXJzZWQgPSBwYXJzZUZsb2F0KHBpY2sudGllcik7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gaXNOYU4ocGFyc2VkKSA/IDk5OSA6IHBhcnNlZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIDk5OTtcbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgcmV0dXJuIGdldFRpZXJWYWx1ZShhKSAtIGdldFRpZXJWYWx1ZShiKTtcbiAgICAgICAgICAgIH0pWzBdIHx8IG51bGw7XG5cbiAgICAgICAgICBwb3NpdGlvblRpZXJzW3Bvc2l0aW9uXSA9IHtcbiAgICAgICAgICAgIHBvc2l0aW9uLFxuICAgICAgICAgICAgcGxheWVyczogcG9zaXRpb25QaWNrcyxcbiAgICAgICAgICAgIGF2ZXJhZ2VUaWVyLFxuICAgICAgICAgICAgYmVzdFBsYXllcixcbiAgICAgICAgICAgIHRvdGFsUGxheWVyczogcG9zaXRpb25QaWNrcy5sZW5ndGhcbiAgICAgICAgICB9O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIE5vIHBsYXllcnMgYXQgdGhpcyBwb3NpdGlvblxuICAgICAgICAgIHBvc2l0aW9uVGllcnNbcG9zaXRpb25dID0ge1xuICAgICAgICAgICAgcG9zaXRpb24sXG4gICAgICAgICAgICBwbGF5ZXJzOiBbXSxcbiAgICAgICAgICAgIGF2ZXJhZ2VUaWVyOiAxMCwgLy8gVXNlIDEwIGFzIHdvcnN0IHRpZXIgd2hlbiBubyBwbGF5ZXJzXG4gICAgICAgICAgICBiZXN0UGxheWVyOiBudWxsLFxuICAgICAgICAgICAgdG90YWxQbGF5ZXJzOiAwXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIC8vIENhbGN1bGF0ZSBvdmVyYWxsIHRpZXIgc2NvcmUgKHdlaWdodGVkIGF2ZXJhZ2UpXG4gICAgICBjb25zdCB3ZWlnaHRzID0geyBRQjogMS4yLCBSQjogMS41LCBXUjogMS41LCBURTogMS4wLCBLOiAwLjMsIERFRjogMC41IH07XG4gICAgICBsZXQgd2VpZ2h0ZWRTdW0gPSAwO1xuICAgICAgbGV0IHRvdGFsV2VpZ2h0ID0gMDtcblxuICAgICAgT2JqZWN0LmVudHJpZXMocG9zaXRpb25UaWVycykuZm9yRWFjaCgoW3Bvc2l0aW9uLCBkYXRhXSkgPT4ge1xuICAgICAgICBpZiAoZGF0YS50b3RhbFBsYXllcnMgPiAwKSB7XG4gICAgICAgICAgd2VpZ2h0ZWRTdW0gKz0gZGF0YS5hdmVyYWdlVGllciAqIHdlaWdodHNbcG9zaXRpb24gYXMga2V5b2YgdHlwZW9mIHdlaWdodHNdO1xuICAgICAgICAgIHRvdGFsV2VpZ2h0ICs9IHdlaWdodHNbcG9zaXRpb24gYXMga2V5b2YgdHlwZW9mIHdlaWdodHNdO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgY29uc3Qgb3ZlcmFsbFRpZXJTY29yZSA9IHRvdGFsV2VpZ2h0ID4gMCA/IHdlaWdodGVkU3VtIC8gdG90YWxXZWlnaHQgOiAwO1xuXG4gICAgICB0ZWFtVGllckRhdGEucHVzaCh7XG4gICAgICAgIHRlYW1OYW1lLFxuICAgICAgICByb3N0ZXJJZDogcm9zdGVyLnJvc3Rlcl9pZC50b1N0cmluZygpLFxuICAgICAgICBvd25lcklkOiByb3N0ZXIub3duZXJfaWQsXG4gICAgICAgIHBvc2l0aW9uVGllcnMsXG4gICAgICAgIG92ZXJhbGxUaWVyU2NvcmVcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBwcm9jZXNzaW5nIHRlYW0gJHt0ZWFtTmFtZSB8fCAndW5rbm93bid9OmAsIGVycm9yKTtcbiAgICAgICAgLy8gQ29udGludWUgd2l0aCBvdGhlciB0ZWFtcyBldmVuIGlmIG9uZSBmYWlsc1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBkYXRhOiB0ZWFtVGllckRhdGFcbiAgICB9KTtcblxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHByb2Nlc3NpbmcgdGVhbSB0aWVyczonLCBlcnJvcik7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgeyBlcnJvcjogJ0ZhaWxlZCB0byBwcm9jZXNzIHRlYW0gdGllciBkYXRhJyB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsInNsZWVwZXJBUEkiLCJQbGF5ZXJNYXRjaGVyIiwiUE9TVCIsInJlcXVlc3QiLCJsZWFndWVJZCIsImRyYWZ0QW5hbHlzaXNEYXRhIiwianNvbiIsImVycm9yIiwic3RhdHVzIiwiY29uc29sZSIsImxvZyIsIm1vY2tvU2hlZXREYXRhIiwibGVuZ3RoIiwicm9zdGVycyIsInVzZXJzIiwicGxheWVycyIsIlByb21pc2UiLCJhbGwiLCJnZXRSb3N0ZXJzIiwiZ2V0VXNlcnMiLCJnZXRQbGF5ZXJzIiwiT2JqZWN0Iiwia2V5cyIsInJvc3RlclRvVGVhbU1hcCIsIk1hcCIsImZvckVhY2giLCJyb3N0ZXIiLCJ1c2VyIiwiZmluZCIsInUiLCJ1c2VyX2lkIiwib3duZXJfaWQiLCJzZXQiLCJyb3N0ZXJfaWQiLCJ0b1N0cmluZyIsImRpc3BsYXlfbmFtZSIsInBvc2l0aW9ucyIsInBvcyIsInRvcFBsYXllcnMiLCJmaWx0ZXIiLCJwIiwicG9zaXRpb24iLCJzb3J0IiwiYSIsImIiLCJwb3NSYW5rIiwic2xpY2UiLCJtYXAiLCJwbGF5ZXIiLCJwb3NUaWVyIiwiam9pbiIsInBsYXllck1hdGNoZXIiLCJ0ZWFtUGlja3MiLCJhbGxQaWNrcyIsInBpY2siLCJyb3N0ZXJJZCIsIkFycmF5IiwiZnJvbSIsImVudHJpZXMiLCJfIiwidGVhbU5hbWUiLCJ0ZWFtIiwiaGFzIiwiZ2V0IiwicHVzaCIsInBpY2tzIiwidGVhbVRpZXJEYXRhIiwiaW5kZXgiLCJ0ZWFtUGlja3NMaXN0IiwiY3VycmVudFJvc3RlclBsYXllcnMiLCJpc0FycmF5IiwicGxheWVySWQiLCJmaXJzdF9uYW1lIiwibGFzdF9uYW1lIiwibW9ja29QbGF5ZXIiLCJmaW5kTWF0Y2giLCJwaWNrTnVtYmVyIiwicGxheWVyTmFtZSIsImV4cGVydFJhbmsiLCJlY3IiLCJhZHAiLCJhY3R1YWxQaWNrIiwicmVhY2giLCJ2YWxBZHBTY29yZSIsInZhbEFkcCIsInRpZXIiLCJ2YWxTY29yZSIsInZhbCIsInBsYXlvZmZTaGFyZSIsInBzIiwiaXNWYWx1ZVBpY2siLCJpc1JlYWNoIiwibWF0Y2hlZFBsYXllcnMiLCJ1bm1hdGNoZWRQbGF5ZXJzIiwiYWxsVGVhbVBsYXllcnMiLCJyb3N0ZXJQbGF5ZXIiLCJpc0R1cGxpY2F0ZSIsInNvbWUiLCJkcmFmdFBsYXllciIsInBvc2l0aW9uR3JvdXBzIiwic3RhcnRlclJlcXVpcmVtZW50cyIsIlFCIiwiUkIiLCJXUiIsIlRFIiwiSyIsIkRFRiIsInBvc2l0aW9uVGllcnMiLCJwb3NpdGlvblBpY2tzIiwiZHJhZnRQaWNrcyIsInJvc3RlclBsYXllcnMiLCJwbGF5ZXJzV2l0aFRpZXJzIiwidGllclZhbHVlIiwidGllck1hdGNoIiwibWF0Y2giLCJwYXJzZUludCIsInBhcnNlZCIsInBhcnNlRmxvYXQiLCJpc05hTiIsImF2ZXJhZ2VUaWVyIiwicmVxdWlyZWRTdGFydGVycyIsImFjdHVhbFN0YXJ0ZXJzIiwiTWF0aCIsIm1pbiIsImJlbmNoUGxheWVycyIsIm1heCIsIndlaWdodGVkU3VtIiwidG90YWxXZWlnaHQiLCJzdGFydGVyVGllcnMiLCJzdGFydGVyQXZlcmFnZSIsInJlZHVjZSIsInN1bSIsInRvRml4ZWQiLCJiZW5jaFRpZXJzIiwiYmVuY2hBdmVyYWdlIiwiZHJhZnRQb3NpdGlvbnMiLCJhdmdEcmFmdFBvc2l0aW9uIiwicm91bmQiLCJiZXN0UGxheWVyIiwiZ2V0VGllclZhbHVlIiwidG90YWxQbGF5ZXJzIiwid2VpZ2h0cyIsImRhdGEiLCJvdmVyYWxsVGllclNjb3JlIiwib3duZXJJZCIsInN1Y2Nlc3MiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/team-tiers/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/player-matching/matcher.ts":
/*!********************************************!*\
  !*** ./src/lib/player-matching/matcher.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PlayerMatcher: () => (/* binding */ PlayerMatcher)\n/* harmony export */ });\nclass PlayerMatcher {\n    constructor(mockoSheetPlayers, sleeperPlayers){\n        this.mockoSheetPlayers = [];\n        this.sleeperPlayers = {};\n        this.mockoSheetPlayers = mockoSheetPlayers;\n        this.sleeperPlayers = sleeperPlayers;\n    }\n    findMatch(playerId, position) {\n        const sleeperPlayer = this.sleeperPlayers[playerId];\n        if (!sleeperPlayer) return null;\n        const sleeperName = `${sleeperPlayer.first_name} ${sleeperPlayer.last_name}`;\n        const normalizedSleeperName = this.normalizeName(sleeperName);\n        // Try exact match first\n        let match = this.mockoSheetPlayers.find((player)=>{\n            const normalizedMockoName = this.normalizeName(player.player);\n            return normalizedMockoName === normalizedSleeperName && player.position === position;\n        });\n        if (match) return match;\n        // Try fuzzy matching\n        match = this.mockoSheetPlayers.find((player)=>{\n            const normalizedMockoName = this.normalizeName(player.player);\n            const similarity = this.calculateSimilarity(normalizedSleeperName, normalizedMockoName);\n            return similarity > 0.8 && player.position === position;\n        });\n        if (match) return match;\n        // Try matching by last name and position (for common names)\n        const sleeperLastName = this.normalizeName(sleeperPlayer.last_name);\n        match = this.mockoSheetPlayers.find((player)=>{\n            const mockoLastName = this.extractLastName(player.player);\n            const normalizedMockoLastName = this.normalizeName(mockoLastName);\n            return normalizedMockoLastName === sleeperLastName && player.position === position;\n        });\n        return match || null;\n    }\n    normalizeName(name) {\n        return name.toLowerCase().replace(/[^\\w\\s]/g, \"\") // Remove special characters\n        .replace(/\\s+/g, \" \") // Normalize spaces\n        .trim();\n    }\n    extractLastName(fullName) {\n        const parts = fullName.split(\" \");\n        return parts[parts.length - 1] || fullName;\n    }\n    calculateSimilarity(str1, str2) {\n        const longer = str1.length > str2.length ? str1 : str2;\n        const shorter = str1.length > str2.length ? str2 : str1;\n        if (longer.length === 0) return 1.0;\n        const editDistance = this.levenshteinDistance(longer, shorter);\n        return (longer.length - editDistance) / longer.length;\n    }\n    levenshteinDistance(str1, str2) {\n        const matrix = Array(str2.length + 1).fill(null).map(()=>Array(str1.length + 1).fill(null));\n        for(let i = 0; i <= str1.length; i++)matrix[0][i] = i;\n        for(let j = 0; j <= str2.length; j++)matrix[j][0] = j;\n        for(let j = 1; j <= str2.length; j++){\n            for(let i = 1; i <= str1.length; i++){\n                const indicator = str1[i - 1] === str2[j - 1] ? 0 : 1;\n                matrix[j][i] = Math.min(matrix[j][i - 1] + 1, matrix[j - 1][i] + 1, matrix[j - 1][i - 1] + indicator // substitution\n                );\n            }\n        }\n        return matrix[str2.length][str1.length];\n    }\n    // Get all unmatched players for manual review\n    getUnmatchedPlayers(draftPicks) {\n        const unmatched = [];\n        draftPicks.forEach((pick)=>{\n            const match = this.findMatch(pick.player_id, pick.metadata?.position);\n            if (!match) {\n                const sleeperPlayer = this.sleeperPlayers[pick.player_id];\n                if (sleeperPlayer) {\n                    unmatched.push({\n                        playerId: pick.player_id,\n                        playerName: `${sleeperPlayer.first_name} ${sleeperPlayer.last_name}`,\n                        position: pick.metadata?.position || \"UNKNOWN\",\n                        team: pick.metadata?.team || \"UNKNOWN\"\n                    });\n                }\n            }\n        });\n        return unmatched;\n    }\n    // Get match statistics\n    getMatchStats(draftPicks) {\n        let matchedCount = 0;\n        draftPicks.forEach((pick)=>{\n            const match = this.findMatch(pick.player_id, pick.metadata?.position);\n            if (match) matchedCount++;\n        });\n        return {\n            totalPicks: draftPicks.length,\n            matchedPicks: matchedCount,\n            unmatchedPicks: draftPicks.length - matchedCount,\n            matchRate: draftPicks.length > 0 ? matchedCount / draftPicks.length * 100 : 0\n        };\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q1YsTUFBTU4sZ0JBQWdCLElBQUksQ0FBQ0osY0FBYyxDQUFDK0MsS0FBS0MsU0FBUyxDQUFDO2dCQUN6RCxJQUFJNUMsZUFBZTtvQkFDakJ5QyxVQUFVSyxJQUFJLENBQUM7d0JBQ2JoRCxVQUFVNkMsS0FBS0MsU0FBUzt3QkFDeEJHLFlBQVksQ0FBQyxFQUFFL0MsY0FBY0UsVUFBVSxDQUFDLENBQUMsRUFBRUYsY0FBY0csU0FBUyxDQUFDLENBQUM7d0JBQ3BFSixVQUFVNEMsS0FBS0UsUUFBUSxFQUFFOUMsWUFBWTt3QkFDckNpRCxNQUFNTCxLQUFLRSxRQUFRLEVBQUVHLFFBQVE7b0JBQy9CO2dCQUNGO1lBQ0Y7UUFDRjtRQUVBLE9BQU9QO0lBQ1Q7SUFFQSx1QkFBdUI7SUFDdkJRLGNBQWNULFVBQWlCLEVBSzdCO1FBQ0EsSUFBSVUsZUFBZTtRQUVuQlYsV0FBV0UsT0FBTyxDQUFDQyxDQUFBQTtZQUNqQixNQUFNckMsUUFBUSxJQUFJLENBQUNULFNBQVMsQ0FBQzhDLEtBQUtDLFNBQVMsRUFBRUQsS0FBS0UsUUFBUSxFQUFFOUM7WUFDNUQsSUFBSU8sT0FBTzRDO1FBQ2I7UUFFQSxPQUFPO1lBQ0xDLFlBQVlYLFdBQVdqQixNQUFNO1lBQzdCNkIsY0FBY0Y7WUFDZEcsZ0JBQWdCYixXQUFXakIsTUFBTSxHQUFHMkI7WUFDcENJLFdBQVdkLFdBQVdqQixNQUFNLEdBQUcsSUFBSSxlQUFnQmlCLFdBQVdqQixNQUFNLEdBQUksTUFBTTtRQUNoRjtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9mYW50YXN5LWRhc2hib2FyZC8uL3NyYy9saWIvcGxheWVyLW1hdGNoaW5nL21hdGNoZXIudHM/NDE2MSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBNb2Nrb1NoZWV0UGxheWVyIH0gZnJvbSAnQC90eXBlcy9kcmFmdCc7XG5pbXBvcnQgeyBTbGVlcGVyUGxheWVyIH0gZnJvbSAnQC90eXBlcy9pbmRleCc7XG5cbmV4cG9ydCBjbGFzcyBQbGF5ZXJNYXRjaGVyIHtcbiAgcHJpdmF0ZSBtb2Nrb1NoZWV0UGxheWVyczogTW9ja29TaGVldFBsYXllcltdID0gW107XG4gIHByaXZhdGUgc2xlZXBlclBsYXllcnM6IFJlY29yZDxzdHJpbmcsIFNsZWVwZXJQbGF5ZXI+ID0ge307XG5cbiAgY29uc3RydWN0b3IobW9ja29TaGVldFBsYXllcnM6IE1vY2tvU2hlZXRQbGF5ZXJbXSwgc2xlZXBlclBsYXllcnM6IFJlY29yZDxzdHJpbmcsIFNsZWVwZXJQbGF5ZXI+KSB7XG4gICAgdGhpcy5tb2Nrb1NoZWV0UGxheWVycyA9IG1vY2tvU2hlZXRQbGF5ZXJzO1xuICAgIHRoaXMuc2xlZXBlclBsYXllcnMgPSBzbGVlcGVyUGxheWVycztcbiAgfVxuXG4gIGZpbmRNYXRjaChwbGF5ZXJJZDogc3RyaW5nLCBwb3NpdGlvbjogc3RyaW5nKTogTW9ja29TaGVldFBsYXllciB8IG51bGwge1xuICAgIGNvbnN0IHNsZWVwZXJQbGF5ZXIgPSB0aGlzLnNsZWVwZXJQbGF5ZXJzW3BsYXllcklkXTtcbiAgICBpZiAoIXNsZWVwZXJQbGF5ZXIpIHJldHVybiBudWxsO1xuXG4gICAgY29uc3Qgc2xlZXBlck5hbWUgPSBgJHtzbGVlcGVyUGxheWVyLmZpcnN0X25hbWV9ICR7c2xlZXBlclBsYXllci5sYXN0X25hbWV9YDtcbiAgICBjb25zdCBub3JtYWxpemVkU2xlZXBlck5hbWUgPSB0aGlzLm5vcm1hbGl6ZU5hbWUoc2xlZXBlck5hbWUpO1xuXG4gICAgLy8gVHJ5IGV4YWN0IG1hdGNoIGZpcnN0XG4gICAgbGV0IG1hdGNoID0gdGhpcy5tb2Nrb1NoZWV0UGxheWVycy5maW5kKHBsYXllciA9PiB7XG4gICAgICBjb25zdCBub3JtYWxpemVkTW9ja29OYW1lID0gdGhpcy5ub3JtYWxpemVOYW1lKHBsYXllci5wbGF5ZXIpO1xuICAgICAgcmV0dXJuIG5vcm1hbGl6ZWRNb2Nrb05hbWUgPT09IG5vcm1hbGl6ZWRTbGVlcGVyTmFtZSAmJiBwbGF5ZXIucG9zaXRpb24gPT09IHBvc2l0aW9uO1xuICAgIH0pO1xuXG4gICAgaWYgKG1hdGNoKSByZXR1cm4gbWF0Y2g7XG5cbiAgICAvLyBUcnkgZnV6enkgbWF0Y2hpbmdcbiAgICBtYXRjaCA9IHRoaXMubW9ja29TaGVldFBsYXllcnMuZmluZChwbGF5ZXIgPT4ge1xuICAgICAgY29uc3Qgbm9ybWFsaXplZE1vY2tvTmFtZSA9IHRoaXMubm9ybWFsaXplTmFtZShwbGF5ZXIucGxheWVyKTtcbiAgICAgIGNvbnN0IHNpbWlsYXJpdHkgPSB0aGlzLmNhbGN1bGF0ZVNpbWlsYXJpdHkobm9ybWFsaXplZFNsZWVwZXJOYW1lLCBub3JtYWxpemVkTW9ja29OYW1lKTtcbiAgICAgIHJldHVybiBzaW1pbGFyaXR5ID4gMC44ICYmIHBsYXllci5wb3NpdGlvbiA9PT0gcG9zaXRpb247XG4gICAgfSk7XG5cbiAgICBpZiAobWF0Y2gpIHJldHVybiBtYXRjaDtcblxuICAgIC8vIFRyeSBtYXRjaGluZyBieSBsYXN0IG5hbWUgYW5kIHBvc2l0aW9uIChmb3IgY29tbW9uIG5hbWVzKVxuICAgIGNvbnN0IHNsZWVwZXJMYXN0TmFtZSA9IHRoaXMubm9ybWFsaXplTmFtZShzbGVlcGVyUGxheWVyLmxhc3RfbmFtZSk7XG4gICAgbWF0Y2ggPSB0aGlzLm1vY2tvU2hlZXRQbGF5ZXJzLmZpbmQocGxheWVyID0+IHtcbiAgICAgIGNvbnN0IG1vY2tvTGFzdE5hbWUgPSB0aGlzLmV4dHJhY3RMYXN0TmFtZShwbGF5ZXIucGxheWVyKTtcbiAgICAgIGNvbnN0IG5vcm1hbGl6ZWRNb2Nrb0xhc3ROYW1lID0gdGhpcy5ub3JtYWxpemVOYW1lKG1vY2tvTGFzdE5hbWUpO1xuICAgICAgcmV0dXJuIG5vcm1hbGl6ZWRNb2Nrb0xhc3ROYW1lID09PSBzbGVlcGVyTGFzdE5hbWUgJiYgcGxheWVyLnBvc2l0aW9uID09PSBwb3NpdGlvbjtcbiAgICB9KTtcblxuICAgIHJldHVybiBtYXRjaCB8fCBudWxsO1xuICB9XG5cbiAgcHJpdmF0ZSBub3JtYWxpemVOYW1lKG5hbWU6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgcmV0dXJuIG5hbWVcbiAgICAgIC50b0xvd2VyQ2FzZSgpXG4gICAgICAucmVwbGFjZSgvW15cXHdcXHNdL2csICcnKSAvLyBSZW1vdmUgc3BlY2lhbCBjaGFyYWN0ZXJzXG4gICAgICAucmVwbGFjZSgvXFxzKy9nLCAnICcpIC8vIE5vcm1hbGl6ZSBzcGFjZXNcbiAgICAgIC50cmltKCk7XG4gIH1cblxuICBwcml2YXRlIGV4dHJhY3RMYXN0TmFtZShmdWxsTmFtZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBjb25zdCBwYXJ0cyA9IGZ1bGxOYW1lLnNwbGl0KCcgJyk7XG4gICAgcmV0dXJuIHBhcnRzW3BhcnRzLmxlbmd0aCAtIDFdIHx8IGZ1bGxOYW1lO1xuICB9XG5cbiAgcHJpdmF0ZSBjYWxjdWxhdGVTaW1pbGFyaXR5KHN0cjE6IHN0cmluZywgc3RyMjogc3RyaW5nKTogbnVtYmVyIHtcbiAgICBjb25zdCBsb25nZXIgPSBzdHIxLmxlbmd0aCA+IHN0cjIubGVuZ3RoID8gc3RyMSA6IHN0cjI7XG4gICAgY29uc3Qgc2hvcnRlciA9IHN0cjEubGVuZ3RoID4gc3RyMi5sZW5ndGggPyBzdHIyIDogc3RyMTtcbiAgICBcbiAgICBpZiAobG9uZ2VyLmxlbmd0aCA9PT0gMCkgcmV0dXJuIDEuMDtcbiAgICBcbiAgICBjb25zdCBlZGl0RGlzdGFuY2UgPSB0aGlzLmxldmVuc2h0ZWluRGlzdGFuY2UobG9uZ2VyLCBzaG9ydGVyKTtcbiAgICByZXR1cm4gKGxvbmdlci5sZW5ndGggLSBlZGl0RGlzdGFuY2UpIC8gbG9uZ2VyLmxlbmd0aDtcbiAgfVxuXG4gIHByaXZhdGUgbGV2ZW5zaHRlaW5EaXN0YW5jZShzdHIxOiBzdHJpbmcsIHN0cjI6IHN0cmluZyk6IG51bWJlciB7XG4gICAgY29uc3QgbWF0cml4ID0gQXJyYXkoc3RyMi5sZW5ndGggKyAxKS5maWxsKG51bGwpLm1hcCgoKSA9PiBBcnJheShzdHIxLmxlbmd0aCArIDEpLmZpbGwobnVsbCkpO1xuICAgIFxuICAgIGZvciAobGV0IGkgPSAwOyBpIDw9IHN0cjEubGVuZ3RoOyBpKyspIG1hdHJpeFswXVtpXSA9IGk7XG4gICAgZm9yIChsZXQgaiA9IDA7IGogPD0gc3RyMi5sZW5ndGg7IGorKykgbWF0cml4W2pdWzBdID0gajtcbiAgICBcbiAgICBmb3IgKGxldCBqID0gMTsgaiA8PSBzdHIyLmxlbmd0aDsgaisrKSB7XG4gICAgICBmb3IgKGxldCBpID0gMTsgaSA8PSBzdHIxLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGluZGljYXRvciA9IHN0cjFbaSAtIDFdID09PSBzdHIyW2ogLSAxXSA/IDAgOiAxO1xuICAgICAgICBtYXRyaXhbal1baV0gPSBNYXRoLm1pbihcbiAgICAgICAgICBtYXRyaXhbal1baSAtIDFdICsgMSwgLy8gZGVsZXRpb25cbiAgICAgICAgICBtYXRyaXhbaiAtIDFdW2ldICsgMSwgLy8gaW5zZXJ0aW9uXG4gICAgICAgICAgbWF0cml4W2ogLSAxXVtpIC0gMV0gKyBpbmRpY2F0b3IgLy8gc3Vic3RpdHV0aW9uXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBtYXRyaXhbc3RyMi5sZW5ndGhdW3N0cjEubGVuZ3RoXTtcbiAgfVxuXG4gIC8vIEdldCBhbGwgdW5tYXRjaGVkIHBsYXllcnMgZm9yIG1hbnVhbCByZXZpZXdcbiAgZ2V0VW5tYXRjaGVkUGxheWVycyhkcmFmdFBpY2tzOiBhbnlbXSk6IEFycmF5PHtcbiAgICBwbGF5ZXJJZDogc3RyaW5nO1xuICAgIHBsYXllck5hbWU6IHN0cmluZztcbiAgICBwb3NpdGlvbjogc3RyaW5nO1xuICAgIHRlYW06IHN0cmluZztcbiAgfT4ge1xuICAgIGNvbnN0IHVubWF0Y2hlZDogQXJyYXk8e1xuICAgICAgcGxheWVySWQ6IHN0cmluZztcbiAgICAgIHBsYXllck5hbWU6IHN0cmluZztcbiAgICAgIHBvc2l0aW9uOiBzdHJpbmc7XG4gICAgICB0ZWFtOiBzdHJpbmc7XG4gICAgfT4gPSBbXTtcblxuICAgIGRyYWZ0UGlja3MuZm9yRWFjaChwaWNrID0+IHtcbiAgICAgIGNvbnN0IG1hdGNoID0gdGhpcy5maW5kTWF0Y2gocGljay5wbGF5ZXJfaWQsIHBpY2subWV0YWRhdGE/LnBvc2l0aW9uKTtcbiAgICAgIGlmICghbWF0Y2gpIHtcbiAgICAgICAgY29uc3Qgc2xlZXBlclBsYXllciA9IHRoaXMuc2xlZXBlclBsYXllcnNbcGljay5wbGF5ZXJfaWRdO1xuICAgICAgICBpZiAoc2xlZXBlclBsYXllcikge1xuICAgICAgICAgIHVubWF0Y2hlZC5wdXNoKHtcbiAgICAgICAgICAgIHBsYXllcklkOiBwaWNrLnBsYXllcl9pZCxcbiAgICAgICAgICAgIHBsYXllck5hbWU6IGAke3NsZWVwZXJQbGF5ZXIuZmlyc3RfbmFtZX0gJHtzbGVlcGVyUGxheWVyLmxhc3RfbmFtZX1gLFxuICAgICAgICAgICAgcG9zaXRpb246IHBpY2subWV0YWRhdGE/LnBvc2l0aW9uIHx8ICdVTktOT1dOJyxcbiAgICAgICAgICAgIHRlYW06IHBpY2subWV0YWRhdGE/LnRlYW0gfHwgJ1VOS05PV04nLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gdW5tYXRjaGVkO1xuICB9XG5cbiAgLy8gR2V0IG1hdGNoIHN0YXRpc3RpY3NcbiAgZ2V0TWF0Y2hTdGF0cyhkcmFmdFBpY2tzOiBhbnlbXSk6IHtcbiAgICB0b3RhbFBpY2tzOiBudW1iZXI7XG4gICAgbWF0Y2hlZFBpY2tzOiBudW1iZXI7XG4gICAgdW5tYXRjaGVkUGlja3M6IG51bWJlcjtcbiAgICBtYXRjaFJhdGU6IG51bWJlcjtcbiAgfSB7XG4gICAgbGV0IG1hdGNoZWRDb3VudCA9IDA7XG4gICAgXG4gICAgZHJhZnRQaWNrcy5mb3JFYWNoKHBpY2sgPT4ge1xuICAgICAgY29uc3QgbWF0Y2ggPSB0aGlzLmZpbmRNYXRjaChwaWNrLnBsYXllcl9pZCwgcGljay5tZXRhZGF0YT8ucG9zaXRpb24pO1xuICAgICAgaWYgKG1hdGNoKSBtYXRjaGVkQ291bnQrKztcbiAgICB9KTtcblxuICAgIHJldHVybiB7XG4gICAgICB0b3RhbFBpY2tzOiBkcmFmdFBpY2tzLmxlbmd0aCxcbiAgICAgIG1hdGNoZWRQaWNrczogbWF0Y2hlZENvdW50LFxuICAgICAgdW5tYXRjaGVkUGlja3M6IGRyYWZ0UGlja3MubGVuZ3RoIC0gbWF0Y2hlZENvdW50LFxuICAgICAgbWF0Y2hSYXRlOiBkcmFmdFBpY2tzLmxlbmd0aCA+IDAgPyAobWF0Y2hlZENvdW50IC8gZHJhZnRQaWNrcy5sZW5ndGgpICogMTAwIDogMCxcbiAgICB9O1xuICB9XG59XG4iXSwibmFtZXMiOlsiUGxheWVyTWF0Y2hlciIsImNvbnN0cnVjdG9yIiwibW9ja29TaGVldFBsYXllcnMiLCJzbGVlcGVyUGxheWVycyIsImZpbmRNYXRjaCIsInBsYXllcklkIiwicG9zaXRpb24iLCJzbGVlcGVyUGxheWVyIiwic2xlZXBlck5hbWUiLCJmaXJzdF9uYW1lIiwibGFzdF9uYW1lIiwibm9ybWFsaXplZFNsZWVwZXJOYW1lIiwibm9ybWFsaXplTmFtZSIsIm1hdGNoIiwiZmluZCIsInBsYXllciIsIm5vcm1hbGl6ZWRNb2Nrb05hbWUiLCJzaW1pbGFyaXR5IiwiY2FsY3VsYXRlU2ltaWxhcml0eSIsInNsZWVwZXJMYXN0TmFtZSIsIm1vY2tvTGFzdE5hbWUiLCJleHRyYWN0TGFzdE5hbWUiLCJub3JtYWxpemVkTW9ja29MYXN0TmFtZSIsIm5hbWUiLCJ0b0xvd2VyQ2FzZSIsInJlcGxhY2UiLCJ0cmltIiwiZnVsbE5hbWUiLCJwYXJ0cyIsInNwbGl0IiwibGVuZ3RoIiwic3RyMSIsInN0cjIiLCJsb25nZXIiLCJzaG9ydGVyIiwiZWRpdERpc3RhbmNlIiwibGV2ZW5zaHRlaW5EaXN0YW5jZSIsIm1hdHJpeCIsIkFycmF5IiwiZmlsbCIsIm1hcCIsImkiLCJqIiwiaW5kaWNhdG9yIiwiTWF0aCIsIm1pbiIsImdldFVubWF0Y2hlZFBsYXllcnMiLCJkcmFmdFBpY2tzIiwidW5tYXRjaGVkIiwiZm9yRWFjaCIsInBpY2siLCJwbGF5ZXJfaWQiLCJtZXRhZGF0YSIsInB1c2giLCJwbGF5ZXJOYW1lIiwidGVhbSIsImdldE1hdGNoU3RhdHMiLCJtYXRjaGVkQ291bnQiLCJ0b3RhbFBpY2tzIiwibWF0Y2hlZFBpY2tzIiwidW5tYXRjaGVkUGlja3MiLCJtYXRjaFJhdGUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/player-matching/matcher.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/sleeper/api.ts":
/*!********************************!*\
  !*** ./src/lib/sleeper/api.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   sleeperAPI: () => (/* binding */ sleeperAPI)\n/* harmony export */ });\nconst SLEEPER_BASE_URL = \"https://api.sleeper.app/v1\";\nclass SleeperAPI {\n    async fetch(endpoint) {\n        try {\n            const response = await fetch(`${SLEEPER_BASE_URL}${endpoint}`);\n            if (!response.ok) {\n                if (response.status === 429) {\n                    // Rate limit exceeded - implement retry with backoff\n                    await this.delay(1000);\n                    return this.fetch(endpoint);\n                }\n                // Provide more specific error messages\n                let errorMessage = `HTTP error! status: ${response.status}`;\n                switch(response.status){\n                    case 404:\n                        errorMessage = `Resource not found: ${endpoint}`;\n                        break;\n                    case 403:\n                        errorMessage = `Access forbidden: ${endpoint}`;\n                        break;\n                    case 500:\n                        errorMessage = `Sleeper API server error`;\n                        break;\n                    case 502:\n                    case 503:\n                    case 504:\n                        errorMessage = `Sleeper API temporarily unavailable`;\n                        break;\n                }\n                throw new Error(errorMessage);\n            }\n            return await response.json();\n        } catch (error) {\n            console.error(`Error fetching ${endpoint}:`, error);\n            throw error;\n        }\n    }\n    async delay(ms) {\n        return new Promise((resolve)=>setTimeout(resolve, ms));\n    }\n    async getLeague(leagueId) {\n        return this.fetch(`/league/${leagueId}`);\n    }\n    async getRosters(leagueId) {\n        return this.fetch(`/league/${leagueId}/rosters`);\n    }\n    async getUsers(leagueId) {\n        return this.fetch(`/league/${leagueId}/users`);\n    }\n    async getMatchups(leagueId, week) {\n        return this.fetch(`/league/${leagueId}/matchups/${week}`);\n    }\n    async getAllMatchups(leagueId, maxWeeks = 18) {\n        const matchupsPromises = Array.from({\n            length: maxWeeks\n        }, (_, i)=>this.getMatchups(leagueId, i + 1));\n        return Promise.all(matchupsPromises);\n    }\n    async getPlayerStats(season, week) {\n        const endpoint = week ? `/stats/nfl/${season}/${week}?season_type=regular` : `/stats/nfl/${season}?season_type=regular`;\n        return this.fetch(endpoint);\n    }\n    async getPlayerProjections(season, week) {\n        return this.fetch(`/projections/nfl/${season}/${week}?season_type=regular`);\n    }\n    async getPlayers() {\n        return this.fetch(\"/players/nfl\");\n    }\n    async getNFLState() {\n        return this.fetch(\"/state/nfl\");\n    }\n    async getTransactions(leagueId, week) {\n        return this.fetch(`/league/${leagueId}/transactions/${week}`);\n    }\n    async getDrafts(leagueId) {\n        return this.fetch(`/league/${leagueId}/drafts`);\n    }\n    async getDraftPicks(draftId) {\n        return this.fetch(`/draft/${draftId}/picks`);\n    }\n}\nconst sleeperAPI = new SleeperAPI();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3NsZWVwZXIvYXBpLnRzIiwibWFwcGluZ3MiOiI7Ozs7QUFFQSxNQUFNQSxtQkFBbUI7QUFFekIsTUFBTUM7SUFDSixNQUFjQyxNQUFTQyxRQUFnQixFQUFjO1FBQ25ELElBQUk7WUFDRixNQUFNQyxXQUFXLE1BQU1GLE1BQU0sQ0FBQyxFQUFFRixpQkFBaUIsRUFBRUcsU0FBUyxDQUFDO1lBRTdELElBQUksQ0FBQ0MsU0FBU0MsRUFBRSxFQUFFO2dCQUNoQixJQUFJRCxTQUFTRSxNQUFNLEtBQUssS0FBSztvQkFDM0IscURBQXFEO29CQUNyRCxNQUFNLElBQUksQ0FBQ0MsS0FBSyxDQUFDO29CQUNqQixPQUFPLElBQUksQ0FBQ0wsS0FBSyxDQUFDQztnQkFDcEI7Z0JBRUEsdUNBQXVDO2dCQUN2QyxJQUFJSyxlQUFlLENBQUMsb0JBQW9CLEVBQUVKLFNBQVNFLE1BQU0sQ0FBQyxDQUFDO2dCQUUzRCxPQUFRRixTQUFTRSxNQUFNO29CQUNyQixLQUFLO3dCQUNIRSxlQUFlLENBQUMsb0JBQW9CLEVBQUVMLFNBQVMsQ0FBQzt3QkFDaEQ7b0JBQ0YsS0FBSzt3QkFDSEssZUFBZSxDQUFDLGtCQUFrQixFQUFFTCxTQUFTLENBQUM7d0JBQzlDO29CQUNGLEtBQUs7d0JBQ0hLLGVBQWUsQ0FBQyx3QkFBd0IsQ0FBQzt3QkFDekM7b0JBQ0YsS0FBSztvQkFDTCxLQUFLO29CQUNMLEtBQUs7d0JBQ0hBLGVBQWUsQ0FBQyxtQ0FBbUMsQ0FBQzt3QkFDcEQ7Z0JBQ0o7Z0JBRUEsTUFBTSxJQUFJQyxNQUFNRDtZQUNsQjtZQUVBLE9BQU8sTUFBTUosU0FBU00sSUFBSTtRQUM1QixFQUFFLE9BQU9DLE9BQU87WUFDZEMsUUFBUUQsS0FBSyxDQUFDLENBQUMsZUFBZSxFQUFFUixTQUFTLENBQUMsQ0FBQyxFQUFFUTtZQUM3QyxNQUFNQTtRQUNSO0lBQ0Y7SUFFQSxNQUFjSixNQUFNTSxFQUFVLEVBQWlCO1FBQzdDLE9BQU8sSUFBSUMsUUFBUUMsQ0FBQUEsVUFBV0MsV0FBV0QsU0FBU0Y7SUFDcEQ7SUFFQSxNQUFNSSxVQUFVQyxRQUFnQixFQUEwQjtRQUN4RCxPQUFPLElBQUksQ0FBQ2hCLEtBQUssQ0FBZ0IsQ0FBQyxRQUFRLEVBQUVnQixTQUFTLENBQUM7SUFDeEQ7SUFFQSxNQUFNQyxXQUFXRCxRQUFnQixFQUE0QjtRQUMzRCxPQUFPLElBQUksQ0FBQ2hCLEtBQUssQ0FBa0IsQ0FBQyxRQUFRLEVBQUVnQixTQUFTLFFBQVEsQ0FBQztJQUNsRTtJQUVBLE1BQU1FLFNBQVNGLFFBQWdCLEVBQTBCO1FBQ3ZELE9BQU8sSUFBSSxDQUFDaEIsS0FBSyxDQUFnQixDQUFDLFFBQVEsRUFBRWdCLFNBQVMsTUFBTSxDQUFDO0lBQzlEO0lBRUEsTUFBTUcsWUFBWUgsUUFBZ0IsRUFBRUksSUFBWSxFQUE2QjtRQUMzRSxPQUFPLElBQUksQ0FBQ3BCLEtBQUssQ0FBbUIsQ0FBQyxRQUFRLEVBQUVnQixTQUFTLFVBQVUsRUFBRUksS0FBSyxDQUFDO0lBQzVFO0lBRUEsTUFBTUMsZUFBZUwsUUFBZ0IsRUFBRU0sV0FBbUIsRUFBRSxFQUErQjtRQUN6RixNQUFNQyxtQkFBbUJDLE1BQU1DLElBQUksQ0FBQztZQUFFQyxRQUFRSjtRQUFTLEdBQUcsQ0FBQ0ssR0FBR0MsSUFDNUQsSUFBSSxDQUFDVCxXQUFXLENBQUNILFVBQVVZLElBQUk7UUFFakMsT0FBT2hCLFFBQVFpQixHQUFHLENBQUNOO0lBQ3JCO0lBRUEsTUFBTU8sZUFBZUMsTUFBYyxFQUFFWCxJQUFhLEVBQWdDO1FBQ2hGLE1BQU1uQixXQUFXbUIsT0FDYixDQUFDLFdBQVcsRUFBRVcsT0FBTyxDQUFDLEVBQUVYLEtBQUssb0JBQW9CLENBQUMsR0FDbEQsQ0FBQyxXQUFXLEVBQUVXLE9BQU8sb0JBQW9CLENBQUM7UUFDOUMsT0FBTyxJQUFJLENBQUMvQixLQUFLLENBQXNCQztJQUN6QztJQUVBLE1BQU0rQixxQkFBcUJELE1BQWMsRUFBRVgsSUFBWSxFQUFnQztRQUNyRixPQUFPLElBQUksQ0FBQ3BCLEtBQUssQ0FBc0IsQ0FBQyxpQkFBaUIsRUFBRStCLE9BQU8sQ0FBQyxFQUFFWCxLQUFLLG9CQUFvQixDQUFDO0lBQ2pHO0lBRUEsTUFBTWEsYUFBcUQ7UUFDekQsT0FBTyxJQUFJLENBQUNqQyxLQUFLLENBQWdDO0lBQ25EO0lBRUEsTUFBTWtDLGNBQThFO1FBQ2xGLE9BQU8sSUFBSSxDQUFDbEMsS0FBSyxDQUF3RDtJQUMzRTtJQUVBLE1BQU1tQyxnQkFBZ0JuQixRQUFnQixFQUFFSSxJQUFZLEVBQWtCO1FBQ3BFLE9BQU8sSUFBSSxDQUFDcEIsS0FBSyxDQUFRLENBQUMsUUFBUSxFQUFFZ0IsU0FBUyxjQUFjLEVBQUVJLEtBQUssQ0FBQztJQUNyRTtJQUVBLE1BQU1nQixVQUFVcEIsUUFBZ0IsRUFBa0I7UUFDaEQsT0FBTyxJQUFJLENBQUNoQixLQUFLLENBQVEsQ0FBQyxRQUFRLEVBQUVnQixTQUFTLE9BQU8sQ0FBQztJQUN2RDtJQUVBLE1BQU1xQixjQUFjQyxPQUFlLEVBQWtCO1FBQ25ELE9BQU8sSUFBSSxDQUFDdEMsS0FBSyxDQUFRLENBQUMsT0FBTyxFQUFFc0MsUUFBUSxNQUFNLENBQUM7SUFDcEQ7QUFDRjtBQUVPLE1BQU1DLGFBQWEsSUFBSXhDLGFBQWEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9mYW50YXN5LWRhc2hib2FyZC8uL3NyYy9saWIvc2xlZXBlci9hcGkudHM/OGYwYyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBTbGVlcGVyTGVhZ3VlLCBTbGVlcGVyUm9zdGVyLCBTbGVlcGVyVXNlciwgU2xlZXBlclBsYXllciwgU2xlZXBlck1hdGNodXAgfSBmcm9tICdAL3R5cGVzJztcblxuY29uc3QgU0xFRVBFUl9CQVNFX1VSTCA9ICdodHRwczovL2FwaS5zbGVlcGVyLmFwcC92MSc7XG5cbmNsYXNzIFNsZWVwZXJBUEkge1xuICBwcml2YXRlIGFzeW5jIGZldGNoPFQ+KGVuZHBvaW50OiBzdHJpbmcpOiBQcm9taXNlPFQ+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHtTTEVFUEVSX0JBU0VfVVJMfSR7ZW5kcG9pbnR9YCk7XG4gICAgICBcbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gNDI5KSB7XG4gICAgICAgICAgLy8gUmF0ZSBsaW1pdCBleGNlZWRlZCAtIGltcGxlbWVudCByZXRyeSB3aXRoIGJhY2tvZmZcbiAgICAgICAgICBhd2FpdCB0aGlzLmRlbGF5KDEwMDApO1xuICAgICAgICAgIHJldHVybiB0aGlzLmZldGNoKGVuZHBvaW50KTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gUHJvdmlkZSBtb3JlIHNwZWNpZmljIGVycm9yIG1lc3NhZ2VzXG4gICAgICAgIGxldCBlcnJvck1lc3NhZ2UgPSBgSFRUUCBlcnJvciEgc3RhdHVzOiAke3Jlc3BvbnNlLnN0YXR1c31gO1xuICAgICAgICBcbiAgICAgICAgc3dpdGNoIChyZXNwb25zZS5zdGF0dXMpIHtcbiAgICAgICAgICBjYXNlIDQwNDpcbiAgICAgICAgICAgIGVycm9yTWVzc2FnZSA9IGBSZXNvdXJjZSBub3QgZm91bmQ6ICR7ZW5kcG9pbnR9YDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgNDAzOlxuICAgICAgICAgICAgZXJyb3JNZXNzYWdlID0gYEFjY2VzcyBmb3JiaWRkZW46ICR7ZW5kcG9pbnR9YDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgNTAwOlxuICAgICAgICAgICAgZXJyb3JNZXNzYWdlID0gYFNsZWVwZXIgQVBJIHNlcnZlciBlcnJvcmA7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIDUwMjpcbiAgICAgICAgICBjYXNlIDUwMzpcbiAgICAgICAgICBjYXNlIDUwNDpcbiAgICAgICAgICAgIGVycm9yTWVzc2FnZSA9IGBTbGVlcGVyIEFQSSB0ZW1wb3JhcmlseSB1bmF2YWlsYWJsZWA7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yTWVzc2FnZSk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIHJldHVybiBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGZldGNoaW5nICR7ZW5kcG9pbnR9OmAsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZGVsYXkobXM6IG51bWJlcik6IFByb21pc2U8dm9pZD4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgbXMpKTtcbiAgfVxuXG4gIGFzeW5jIGdldExlYWd1ZShsZWFndWVJZDogc3RyaW5nKTogUHJvbWlzZTxTbGVlcGVyTGVhZ3VlPiB7XG4gICAgcmV0dXJuIHRoaXMuZmV0Y2g8U2xlZXBlckxlYWd1ZT4oYC9sZWFndWUvJHtsZWFndWVJZH1gKTtcbiAgfVxuXG4gIGFzeW5jIGdldFJvc3RlcnMobGVhZ3VlSWQ6IHN0cmluZyk6IFByb21pc2U8U2xlZXBlclJvc3RlcltdPiB7XG4gICAgcmV0dXJuIHRoaXMuZmV0Y2g8U2xlZXBlclJvc3RlcltdPihgL2xlYWd1ZS8ke2xlYWd1ZUlkfS9yb3N0ZXJzYCk7XG4gIH1cblxuICBhc3luYyBnZXRVc2VycyhsZWFndWVJZDogc3RyaW5nKTogUHJvbWlzZTxTbGVlcGVyVXNlcltdPiB7XG4gICAgcmV0dXJuIHRoaXMuZmV0Y2g8U2xlZXBlclVzZXJbXT4oYC9sZWFndWUvJHtsZWFndWVJZH0vdXNlcnNgKTtcbiAgfVxuXG4gIGFzeW5jIGdldE1hdGNodXBzKGxlYWd1ZUlkOiBzdHJpbmcsIHdlZWs6IG51bWJlcik6IFByb21pc2U8U2xlZXBlck1hdGNodXBbXT4ge1xuICAgIHJldHVybiB0aGlzLmZldGNoPFNsZWVwZXJNYXRjaHVwW10+KGAvbGVhZ3VlLyR7bGVhZ3VlSWR9L21hdGNodXBzLyR7d2Vla31gKTtcbiAgfVxuXG4gIGFzeW5jIGdldEFsbE1hdGNodXBzKGxlYWd1ZUlkOiBzdHJpbmcsIG1heFdlZWtzOiBudW1iZXIgPSAxOCk6IFByb21pc2U8U2xlZXBlck1hdGNodXBbXVtdPiB7XG4gICAgY29uc3QgbWF0Y2h1cHNQcm9taXNlcyA9IEFycmF5LmZyb20oeyBsZW5ndGg6IG1heFdlZWtzIH0sIChfLCBpKSA9PiBcbiAgICAgIHRoaXMuZ2V0TWF0Y2h1cHMobGVhZ3VlSWQsIGkgKyAxKVxuICAgICk7XG4gICAgcmV0dXJuIFByb21pc2UuYWxsKG1hdGNodXBzUHJvbWlzZXMpO1xuICB9XG5cbiAgYXN5bmMgZ2V0UGxheWVyU3RhdHMoc2Vhc29uOiBzdHJpbmcsIHdlZWs/OiBudW1iZXIpOiBQcm9taXNlPFJlY29yZDxzdHJpbmcsIGFueT4+IHtcbiAgICBjb25zdCBlbmRwb2ludCA9IHdlZWsgXG4gICAgICA/IGAvc3RhdHMvbmZsLyR7c2Vhc29ufS8ke3dlZWt9P3NlYXNvbl90eXBlPXJlZ3VsYXJgXG4gICAgICA6IGAvc3RhdHMvbmZsLyR7c2Vhc29ufT9zZWFzb25fdHlwZT1yZWd1bGFyYDtcbiAgICByZXR1cm4gdGhpcy5mZXRjaDxSZWNvcmQ8c3RyaW5nLCBhbnk+PihlbmRwb2ludCk7XG4gIH1cblxuICBhc3luYyBnZXRQbGF5ZXJQcm9qZWN0aW9ucyhzZWFzb246IHN0cmluZywgd2VlazogbnVtYmVyKTogUHJvbWlzZTxSZWNvcmQ8c3RyaW5nLCBhbnk+PiB7XG4gICAgcmV0dXJuIHRoaXMuZmV0Y2g8UmVjb3JkPHN0cmluZywgYW55Pj4oYC9wcm9qZWN0aW9ucy9uZmwvJHtzZWFzb259LyR7d2Vla30/c2Vhc29uX3R5cGU9cmVndWxhcmApO1xuICB9XG5cbiAgYXN5bmMgZ2V0UGxheWVycygpOiBQcm9taXNlPFJlY29yZDxzdHJpbmcsIFNsZWVwZXJQbGF5ZXI+PiB7XG4gICAgcmV0dXJuIHRoaXMuZmV0Y2g8UmVjb3JkPHN0cmluZywgU2xlZXBlclBsYXllcj4+KCcvcGxheWVycy9uZmwnKTtcbiAgfVxuXG4gIGFzeW5jIGdldE5GTFN0YXRlKCk6IFByb21pc2U8eyB3ZWVrOiBudW1iZXI7IHNlYXNvbjogc3RyaW5nOyBzZWFzb25fdHlwZTogc3RyaW5nIH0+IHtcbiAgICByZXR1cm4gdGhpcy5mZXRjaDx7IHdlZWs6IG51bWJlcjsgc2Vhc29uOiBzdHJpbmc7IHNlYXNvbl90eXBlOiBzdHJpbmcgfT4oJy9zdGF0ZS9uZmwnKTtcbiAgfVxuXG4gIGFzeW5jIGdldFRyYW5zYWN0aW9ucyhsZWFndWVJZDogc3RyaW5nLCB3ZWVrOiBudW1iZXIpOiBQcm9taXNlPGFueVtdPiB7XG4gICAgcmV0dXJuIHRoaXMuZmV0Y2g8YW55W10+KGAvbGVhZ3VlLyR7bGVhZ3VlSWR9L3RyYW5zYWN0aW9ucy8ke3dlZWt9YCk7XG4gIH1cblxuICBhc3luYyBnZXREcmFmdHMobGVhZ3VlSWQ6IHN0cmluZyk6IFByb21pc2U8YW55W10+IHtcbiAgICByZXR1cm4gdGhpcy5mZXRjaDxhbnlbXT4oYC9sZWFndWUvJHtsZWFndWVJZH0vZHJhZnRzYCk7XG4gIH1cblxuICBhc3luYyBnZXREcmFmdFBpY2tzKGRyYWZ0SWQ6IHN0cmluZyk6IFByb21pc2U8YW55W10+IHtcbiAgICByZXR1cm4gdGhpcy5mZXRjaDxhbnlbXT4oYC9kcmFmdC8ke2RyYWZ0SWR9L3BpY2tzYCk7XG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IHNsZWVwZXJBUEkgPSBuZXcgU2xlZXBlckFQSSgpO1xuIl0sIm5hbWVzIjpbIlNMRUVQRVJfQkFTRV9VUkwiLCJTbGVlcGVyQVBJIiwiZmV0Y2giLCJlbmRwb2ludCIsInJlc3BvbnNlIiwib2siLCJzdGF0dXMiLCJkZWxheSIsImVycm9yTWVzc2FnZSIsIkVycm9yIiwianNvbiIsImVycm9yIiwiY29uc29sZSIsIm1zIiwiUHJvbWlzZSIsInJlc29sdmUiLCJzZXRUaW1lb3V0IiwiZ2V0TGVhZ3VlIiwibGVhZ3VlSWQiLCJnZXRSb3N0ZXJzIiwiZ2V0VXNlcnMiLCJnZXRNYXRjaHVwcyIsIndlZWsiLCJnZXRBbGxNYXRjaHVwcyIsIm1heFdlZWtzIiwibWF0Y2h1cHNQcm9taXNlcyIsIkFycmF5IiwiZnJvbSIsImxlbmd0aCIsIl8iLCJpIiwiYWxsIiwiZ2V0UGxheWVyU3RhdHMiLCJzZWFzb24iLCJnZXRQbGF5ZXJQcm9qZWN0aW9ucyIsImdldFBsYXllcnMiLCJnZXRORkxTdGF0ZSIsImdldFRyYW5zYWN0aW9ucyIsImdldERyYWZ0cyIsImdldERyYWZ0UGlja3MiLCJkcmFmdElkIiwic2xlZXBlckFQSSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/sleeper/api.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next@14.2.32_react-dom@18.3.1_react@18.3.1__react@18.3.1"], () => (__webpack_exec__("(rsc)/./node_modules/.pnpm/next@14.2.32_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fteam-tiers%2Froute&page=%2Fapi%2Fteam-tiers%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fteam-tiers%2Froute.ts&appDir=%2FUsers%2Farnav%2FDocuments%2FFF%20Metrics%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Farnav%2FDocuments%2FFF%20Metrics&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();